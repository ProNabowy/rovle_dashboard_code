import{C as W,O as w,r as s,b as de,c as pe,e as D,m as N,M as fe,N as me,Q as be,V as ve,W as K,X as ye,j as u,J as he,n as ge,u as Pe,A as xe,l as Ce,G as Se,U as Te,S as Ne,I as je}from"./index-UqVmnRqZ.js";function B(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function Ie(e){if(Array.isArray(e))return B(e)}function Oe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function X(e,r){if(e){if(typeof e=="string")return B(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,r)}}function _e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ae(e){return Ie(e)||Oe(e)||X(e)||_e()}function R(e){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},R(e)}function Ee(e,r){if(R(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var t=n.call(e,r||"default");if(R(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function we(e){var r=Ee(e,"string");return R(r)==="symbol"?r:String(r)}function Re(e,r,n){return r=we(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function ke(e){if(Array.isArray(e))return e}function De(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var t,d,f,i,g=[],m=!0,j=!1;try{if(f=(n=n.call(e)).next,r===0){if(Object(n)!==n)return;m=!1}else for(;!(m=(t=f.call(n)).done)&&(g.push(t.value),g.length!==r);m=!0);}catch(y){j=!0,d=y}finally{try{if(!m&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(j)throw d}}return g}}function Ue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G(e,r){return ke(e)||De(e,r)||X(e,r)||Ue()}var M=W.extend({defaultProps:{__TYPE:"Accordion",id:null,activeIndex:null,className:null,style:null,multiple:!1,expandIcon:null,collapseIcon:null,transitionOptions:null,onTabOpen:null,onTabClose:null,onTabChange:null,children:void 0}}),_=W.extend({defaultProps:{__TYPE:"AccordionTab",className:null,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,style:null,tabIndex:0,children:void 0},getCProp:function(r,n){return w.getComponentProp(r,n,_.defaultProps)},getCProps:function(r){return w.getComponentProps(r,_.defaultProps)},getCOtherProps:function(r){return w.getComponentDiffProps(r,_.defaultProps)}});function J(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),n.push.apply(n,t)}return n}function O(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?J(Object(n),!0).forEach(function(t){Re(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var q=function(){},Y=s.forwardRef(function(e,r){var n=s.useContext(de),t=M.getProps(e,n),d=s.useState(t.id),f=G(d,2),i=f[0],g=f[1],m=s.useState(t.activeIndex),j=G(m,2),y=j[0],U=j[1],k=s.useRef(null),A=t.onTabChange?t.activeIndex:y,P={props:t,state:{id:i,activeIndex:y}},L=M.setMetaData(O({},P)),x=L.ptm,V=L.ptmo,o=function(a,c){return V(l(a,"pt"),c,{props:a.props,parent:P})},l=function(a,c){return _.getCProp(a,c)},I=function(a,c,p){if(!l(c,"disabled")){var b=E(p),v=null;if(t.multiple){var S=A||[];v=b?S.filter(function(T){return T!==p}):[].concat(Ae(S),[p])}else v=b?null:p;var h=b?t.onTabClose:t.onTabOpen;h&&h({originalEvent:a,index:p}),t.onTabChange?t.onTabChange({originalEvent:a,index:v}):U(v)}a.preventDefault()},E=function(a){return t.multiple?A&&A.some(function(c){return c===a}):A===a};if(s.useImperativeHandle(r,function(){return{props:t,getElement:function(){return k.current}}}),pe(function(){i||g(fe())}),!i)return null;var z=function(a,c,p){var b=O(O({},l(a,"style")||{}),l(a,"headerStyle")||{}),v=D("p-accordion-header",{"p-highlight":c,"p-disabled":l(a,"disabled")},l(a,"headerClassName"),l(a,"className")),S=i+"_header_"+p,h=i+"_content_"+p,T=l(a,"disabled")?-1:l(a,"tabIndex"),F=N({className:"p-accordion-header-text"},o(a,"headertitle")),H=l(a,"headerTemplate")?w.getJSXElement(l(a,"headerTemplate"),_.getCProps(a)):s.createElement("span",F,l(a,"header")),ae="p-accordion-toggle-icon",$=N({className:ae},o(a,"headericon")),oe=c?t.collapseIcon||s.createElement(me,$):t.expandIcon||s.createElement(be,$),le=ve.getJSXIcon(oe,O({},$),{props:t,selected:c}),se=c?K("collapseLabel"):K("expandLabel"),ce=N({className:v,style:b},o(a,"header")),ie=N({id:S,href:"#"+h,className:"p-accordion-header-link",role:"tab",tabIndex:T,onClick:function(ue){return I(ue,a,p)},"aria-label":se,"aria-controls":h,"aria-expanded":c},o(a,"headeraction"));return s.createElement("div",ce,s.createElement("a",ie,le,H))},Q=function(a,c,p){var b=O(O({},l(a,"style")||{}),l(a,"contentStyle")||{}),v=D("p-toggleable-content",l(a,"contentClassName"),l(a,"className")),S=i+"_content_"+p,h=i+"_header_"+p,T=s.createRef(),F=N({id:S,ref:T,className:v,style:b,role:"region","aria-labelledby":h},o(a,"toggleablecontent")),H=N({className:"p-accordion-content"},o(a,"content"));return s.createElement(ye,{nodeRef:T,classNames:"p-toggleable-content",timeout:{enter:1e3,exit:450},in:c,unmountOnExit:!0,options:t.transitionOptions},s.createElement("div",F,s.createElement("div",H,l(a,"children"))))},Z=function(a,c){if(w.isValidChild(a,"AccordionTab")){var p=i+"_"+c,b=E(c),v=z(a,b,c),S=Q(a,b,c),h=D("p-accordion-tab",{"p-accordion-tab-active":b}),T=N({key:p,className:h},_.getCOtherProps(a),o(a,"root"));return s.createElement("div",T,v,S)}return null},ee=function(){return s.Children.map(t.children,Z)},te=D("p-accordion p-component",t.className),re=ee(),ne=N({id:i,ref:k,className:te,style:t.style},M.getOtherProps(t),x("root"));return s.createElement("div",ne,re)});q.displayName="AccordionTab";Y.displayName="Accordion";function Le({items:e,options:r,onOptionChange:n}){return u.jsx("div",{className:"card flex flex-wrap justify-content-center gap-10",children:e==null?void 0:e.map((t,d)=>u.jsxs("div",{className:"flex items-center",children:[u.jsx(he,{inputId:t==null?void 0:t.id,name:t==null?void 0:t.id,value:t==null?void 0:t.title,onChange:f=>n(f,t),checked:r==null?void 0:r.includes(t==null?void 0:t.id)}),u.jsx("label",{htmlFor:t==null?void 0:t.id,className:"ms-2 !mb-0 cursor-pointer select-none",children:t==null?void 0:t.title})]},d))})}function Ve({optionKey:e,permissions:r,options:n,formik:t,onOptionChange:d}){return u.jsxs("div",{className:"col-span-6 flex items-center",children:[u.jsx("label",{className:"text-[#252525] text-[20px] min-w-[200px]",children:e}),u.jsx(Le,{onOptionChange:d,options:n,formik:t,items:r[e]})]})}const Fe=e=>{const[r,n]=s.useState([]),t=new Te,d=new Se,f=new Ne,i=Object.keys(r),m=ge().search.slice(4),j=Pe(),[y,U]=s.useState([]),[k,A]=s.useState({name:"",permissions:[]}),{setIsLoading:P}=s.useContext(xe),x=Ce({initialValues:k,onSubmit:o=>(P(!0),e?t.updateRole(m,o).finally(l=>P(!1)):f.addRole(o,j).finally(l=>P(!1)))});s.useEffect(()=>(x.setValues({name:"",permissions:[]}),()=>{}),[]);const V=(o,l)=>{var E;let I=[...(E=x.values)==null?void 0:E.permissions];o.checked?I.push(l==null?void 0:l.id):I.splice(I.indexOf(l==null?void 0:l.id),1),x.setFieldValue("permissions",I)};return s.useEffect(()=>(P(!0),d.getPermissions().then(o=>n(o)).finally(o=>P(!1)),e&&d.getSingleRole(m).then(o=>{U((o==null?void 0:o.permissions)||[]),x.setFieldValue("name",o==null?void 0:o.name)}),()=>{}),[]),s.useEffect(()=>{x.setFieldValue("permissions",y==null?void 0:y.map(o=>o==null?void 0:o.id))},[y]),{permissionsKeys:i,onOptionChange:V,permissions:r,formik:x}};function Me({asEdit:e}){var f;const{permissionsKeys:r,permissions:n,formik:t,onOptionChange:d}=Fe(e);return u.jsxs("form",{onSubmit:t.handleSubmit,className:"permission-form",children:[u.jsxs("div",{className:"p-10 pb-2",children:[u.jsx("label",{htmlFor:"name-input",className:"mb-3 block text-[20px] text-[#234486]",children:"Nombre del Rol"}),u.jsx(je,{type:"text",required:!0,name:"name",value:(f=t==null?void 0:t.values)==null?void 0:f.name,onChange:t.handleChange,placeholder:"Ingresar Nombre del Rol"})]}),u.jsx("label",{className:"block text-[24px] text-[#252525] opacity-70 p-10 pb-2",children:"PÃ¡ginas"}),u.jsx(Y,{multiple:!0,className:"p-10",activeIndex:0,children:r.map((i,g)=>{var m;return u.jsx(q,{header:i,children:u.jsx(Ve,{options:(m=t.values)==null?void 0:m.permissions,onOptionChange:d,optionKey:i,formik:t,permissions:n})},g)})}),u.jsx("div",{className:"flex-end-container",children:u.jsx("button",{type:"submit",className:"min-btn",children:"Actualizar"})})]})}export{Me as P};
