import{r,G as $,g as I,j as s,L as H,D as K,I as W,a2 as ee,A as te,E as ae,b as ne,c as se,O as D,W as re,e as C,d as q,m as E,T as oe,n as le,y as ie}from"./index-ucQm_BBe.js";const ce=(e,a)=>{const[n,t]=r.useState({}),[c,d]=r.useState([]),f=new $,u=r.useRef(),[i,o]=r.useState({size_id:"",price:"",id:""});return r.useEffect(()=>(f.getSizes().then(P=>d(P)),()=>{}),[]),{setAddNewPackage:o,inputPriceRef:u,handelAddNewPackage:()=>{var P,l;!(n!=null&&n.name)||!u.current.value?I.warning("Advertencia","Por favor, completa los campos requeridos Precio y Talla."):((P=e.values)==null?void 0:P[a||"sizes"].some(j=>parseInt(j.size_id)===parseInt(i.size_id)))?I.warning("Advertencia","No añadas paquetes duplicados"):(e.setFieldValue(a||"sizes",[...(l=e.values)==null?void 0:l[a||"sizes"],{...i,id:i==null?void 0:i.size_id}]),t({}),u.current.value="",I.success("Bien","Paquete añadido con éxito."))},removePackage:P=>{var l,N;return(N=(l=e.values)==null?void 0:l[a||"sizes"])==null?void 0:N.filter(j=>+j.id!=+P)},selectedSize:n,setSelectedSize:t,options:c,addNewPackage:i}};function ue({formik:e,optionLabel:a,classNames:n,placeholder:t,label:c,inputLabel:d,hasAddButton:f,formikKey:u,inputPlaceholder:i}){const{inputWeightRef:o,setAddNewPackage:y,addNewPackage:h,inputPriceRef:P,handelAddNewPackage:l,removePackage:N,selectedSize:j,options:m,setSelectedSize:b}=ce(e,u);return s.jsxs("div",{className:`rounded-md sm:rounded-[20px] mt-5 sm:mt-20 border border-[#252525] p-3 sm:p-[32px] grid grid-cols-12 gap-3 md:gap-10 ${n}`,children:[s.jsxs("form",{onSubmit:p=>p.preventDefault(),autoComplete:"off",className:"col-span-12 md:col-span-6",children:[s.jsxs("div",{className:"mb-8",children:[f?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"label",children:"Talla"}),s.jsx(H,{to:"/products/plans/size/list/add-size",className:"flex items-center cursor-pointer",children:s.jsx("h2",{className:"font-medium underline text-[#45B8EA] me-3",children:"Añadir Talla"})})]}):s.jsx("label",{className:"label",children:c}),s.jsx(K,{ref:o,value:j,filter:!0,emptyFilterMessage:"No hay opciones disponibles",emptyMessage:"No hay opciones disponibles",onChange:p=>{y(x=>{var v,S,_;return{...x,size_id:(v=p.target.value)==null?void 0:v.id,weight:(S=p.target.value)==null?void 0:S.weight,name:(_=p.target.value)==null?void 0:_.name}}),b(p.value)},options:m,optionLabel:a||"name",placeholder:t||"Seleccionar Talla",className:"w-full p-2  !shadow-none !rounded-none !border-t-transparent !border-l-transparent !border-r-transparent"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("label",{htmlFor:"PriceEuro",className:"label",children:d}),s.jsx(W,{type:"number",ref:P,value:parseFloat(h==null?void 0:h.price),placeholder:i,onChange:p=>{const x=parseFloat(p.target.value);x<0||y(v=>({...v,price:x}))},id:"PriceEuro"})]}),s.jsx("button",{type:"button",onClick:l,className:"bg-[#58291E] text-[20px] text-center text-white font-medium w-full py-2 sm:py-[16px] px-4 sm:px-[24px] rounded-md sm:rounded-full",children:"Añadir Paquete"})]}),s.jsx(ee,{formik:e,removePackage:N,formikKey:u,options:m})]})}const de=e=>{var j;const[a,n]=r.useState([]),t=new $,[c,d]=r.useState({}),[f,u]=r.useState([]),{userPeressmisons:i,user:o,setIsLoading:y}=r.useContext(te),h=o==null?void 0:o.created_by_provider,P=m=>ae(i,m),l=o==null?void 0:o.provider;return r.useEffect(()=>(y(!0),t.getRoasters().then(m=>n(m)).finally(m=>y(!1)),()=>{}),[]),r.useEffect(()=>{var m,b,p,x;if(l!=null&&l.id){const v=a==null?void 0:a.filter(S=>S.id===(l==null?void 0:l.id));u((m=v[0])==null?void 0:m.coffee_shops)}else if(h)u((b=a[0])==null?void 0:b.coffee_shops),e.setFieldValue("provider_id",(p=a==null?void 0:a[0])==null?void 0:p.id);else{const v=a==null?void 0:a.filter(S=>{var _;return S.id===((_=e.values)==null?void 0:_.provider_id)});u((x=v[0])==null?void 0:x.coffee_shops)}},[(j=e.values)==null?void 0:j.provider_id,l,a]),r.useEffect(()=>((c==null?void 0:c.provider_id)&&t.getRoasters().then(b=>{var p;if(n(b),l){const x=(p=b==null?void 0:b.filter(v=>(v==null?void 0:v.id)===(l==null?void 0:l.id)))==null?void 0:p[0];u(x==null?void 0:x.coffee_shops)}}),()=>{}),[c]),{roasters:a,coffee:f,provider:l,handleChangeProvider:m=>{var b;e.setFieldValue("provider_id",(b=m.target.value)==null?void 0:b.id),e.setFieldValue("coffee_shops",[]),e.setFieldValue("sizes",[]),e.setFieldValue("products",[])},isHasPermissions:P,setAddedShops:d,addedShops:c,is_created_by_provider:h}};function T(){return T=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},T.apply(this,arguments)}function O(e){"@babel/helpers - typeof";return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},O(e)}function pe(e,a){if(O(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var t=n.call(e,a||"default");if(O(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function fe(e){var a=pe(e,"string");return O(a)==="symbol"?a:String(a)}function me(e,a,n){return a=fe(a),a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function he(e){if(Array.isArray(e))return e}function be(e,a){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var t,c,d,f,u=[],i=!0,o=!1;try{if(d=(n=n.call(e)).next,a===0){if(Object(n)!==n)return;i=!1}else for(;!(i=(t=d.call(n)).done)&&(u.push(t.value),u.length!==a);i=!0);}catch(y){o=!0,c=y}finally{try{if(!i&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(o)throw c}}return u}}function M(e,a){(a==null||a>e.length)&&(a=e.length);for(var n=0,t=new Array(a);n<a;n++)t[n]=e[n];return t}function ve(e,a){if(e){if(typeof e=="string")return M(e,a);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,a)}}function ge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ye(e,a){return he(e)||be(e,a)||ve(e,a)||ge()}var R=ne.extend({defaultProps:{__TYPE:"RadioButton",autoFocus:!1,checked:!1,className:null,disabled:!1,id:null,inputId:null,inputRef:null,name:null,onChange:null,onClick:null,required:!1,style:null,tabIndex:null,tooltip:null,tooltipOptions:null,value:null,children:void 0}});function V(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,t)}return n}function xe(e){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?V(Object(n),!0).forEach(function(t){me(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var z=r.memo(r.forwardRef(function(e,a){var n=r.useContext(se),t=R.getProps(e,n),c=r.useState(!1),d=ye(c,2),f=d[0],u=d[1],i=r.useRef(null),o=r.useRef(t.inputRef),y=R.setMetaData({props:t,state:{focused:f}}),h=y.ptm,P=function(g){l(g)},l=function(g){if(!t.disabled&&(t.onChange||t.onClick)){var A=t.checked,J=g.target instanceof HTMLDivElement,Q=g.target===o.current,X=Q&&g.target.checked!==A,B=J&&(C.hasClass(i.current,"p-radiobutton-checked")===A?!A:!1);if(X||B){var F=!A,L={originalEvent:g,value:t.value,checked:F,stopPropagation:function(){g.stopPropagation()},preventDefault:function(){g.preventDefault()},target:{type:"radio",name:t.name,id:t.id,value:t.value,checked:F}};if(t.onClick&&t.onClick(L),g.defaultPrevented)return;t.onChange&&t.onChange(L),B&&(o.current.checked=F)}C.focus(o.current),g.preventDefault()}},N=function(){u(!0)},j=function(){u(!1)},m=function(g){(g.code==="Space"||g.key===" ")&&l(g)};r.useEffect(function(){o.current&&(o.current.checked=t.checked)},[t.checked]),r.useEffect(function(){D.combinedRefs(o,t.inputRef)},[o,t.inputRef]),re(function(){t.autoFocus&&C.focus(o.current,t.autoFocus)}),r.useImperativeHandle(a,function(){return{props:t,select:P,focus:function(){return C.focus(o.current)},getElement:function(){return i.current},getInput:function(){return o.current}}});var b=D.isNotEmpty(t.tooltip),p=R.getOtherProps(t),x=D.reduceKeys(p,C.ARIA_PROPS),v=q("p-radiobutton p-component",{"p-radiobutton-checked":t.checked,"p-radiobutton-disabled":t.disabled,"p-radiobutton-focused":f},t.className),S=q("p-radiobutton-box",{"p-highlight":t.checked,"p-disabled":t.disabled,"p-focus":f}),_=E({ref:i,id:t.id,className:v,style:t.style,onClick:l},R.getOtherProps(t),h("root")),U=E({className:"p-hidden-accessible"},h("hiddenInputWrapper")),G=E(xe({ref:o,id:t.inputId,type:"radio",name:t.name,defaultChecked:t.checked,onFocus:N,onBlur:j,onKeyDown:m,disabled:t.disabled,required:t.required,tabIndex:t.tabIndex},x),h("hiddenInput")),Y=E({className:S},h("input")),k=E({className:"p-radiobutton-icon"},h("icon"));return r.createElement(r.Fragment,null,r.createElement("div",_,r.createElement("div",U,r.createElement("input",G)),r.createElement("div",Y,r.createElement("div",k))),b&&r.createElement(oe,T({target:i,content:t.tooltip},t.tooltipOptions,{pt:h("tooltip")})))}));z.displayName="RadioButton";function Pe({formik:e}){var a,n,t,c;return s.jsxs("div",{className:"w-full sm:w-[48%]",children:[s.jsx("label",{className:"label block mb-4",children:"Estado"}),s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"flex items-center cursor-pointer me-5",children:[s.jsx(z,{inputId:"ingredient1",name:"active",value:"active",onChange:d=>e.setFieldValue("status",d.value),checked:((a=e.values)==null?void 0:a.status)==="active"}),s.jsx("label",{htmlFor:"ingredient1",className:`ms-2 !mb-0 font-medium ${((n=e.values)==null?void 0:n.status)==="active"?"text-[#28C76F]":"text-[#2525256d]"}`,children:"Activo"})]}),s.jsxs("div",{className:"flex items-center cursor-pointer",children:[s.jsx(z,{inputId:"inactive",name:"inactive",value:"inactive",onChange:d=>e.setFieldValue("status",d.value),checked:((t=e.values)==null?void 0:t.status)==="inactive"}),s.jsx("label",{htmlFor:"inactive",className:`ms-2 !mb-0 font-medium ${((c=e.values)==null?void 0:c.status)==="inactive"?"text-[#28C76F]":"text-[#2525256d]"}`,children:"Inactivo"})]})]})]})}function Ne({formik:e}){var o,y;const{roasters:a,coffee:n,provider:t,handleChangeProvider:c,isHasPermissions:d,setAddedShops:f,addedShops:u,is_created_by_provider:i}=de(e);return s.jsxs("form",{onSubmit:e.handleSubmit,autoComplete:"off",className:"px-3 sm:px-10",children:[s.jsxs("div",{className:"flex-container",children:[s.jsxs("div",{className:"w-full sm:w-[48%]",children:[s.jsx("label",{htmlFor:"plan-name",className:"label",children:"Nombre Plan"}),s.jsx(W,{type:"text",id:"plan-name",name:"name",required:!0,value:(o=e.values)==null?void 0:o.name,onChange:e.handleChange,placeholder:"Este sera el nombre que se verá en la aplicacion"})]}),s.jsx(Pe,{formik:e})]}),!(t!=null&&t.id)&&!i?s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("h2",{className:"label line-clamp-1",children:"Nombre del Tostador"}),d("dashboard.providers.store")?s.jsx(H,{to:"/groups/roasters/add-roaster",className:"flex items-center cursor-pointer ",children:s.jsx("h2",{className:"font-medium underline text-[#45B8EA] line-clamp-1 me-3",children:"Añadir Tostador"})}):null]}),s.jsx(K,{value:le(a,"id",(y=e==null?void 0:e.values)==null?void 0:y.provider_id),onChange:c,filter:!0,emptyFilterMessage:"No hay opciones disponibles",emptyMessage:"No hay opciones disponibles",options:a,optionLabel:"commercial_name",placeholder:"Seleccionar Tostador Name",className:"w-full p-2  !shadow-none !rounded-none !border-t-transparent !border-l-transparent !border-r-transparent"})]}):null,s.jsxs("div",{className:"mb-8",children:[s.jsx("label",{htmlFor:"Description",className:"label",children:"Descripción"}),s.jsx("textarea",{onChange:e.handleChange,value:e.values.description,name:"description",rows:5,type:"text",id:"Description",className:"p-3 w-full border rounded-[5px] mt-5 resize-none border-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Esta sera la descripcion que se verá en la aplicacion"})]}),s.jsx(ie,{formik:e,dataKey:"coffee_shops",url:"/setups/coffee-shop/add-coffee",title:"Cafeterías",pageKey:"Coffee Shops",stateList:f,listOfState:u,pagePermissionKeyName:"dashboard.coffeeShops.store",options:n}),s.jsx(ue,{formik:e,optionLabel:"name",inputLabel:"Precio",label:"Talla"}),s.jsx("button",{type:"submit",className:"min-btn block !mt-10 ml-auto",children:"Enviar"})]})}export{Ne as P};
