import{r as u,G as C,h as P,j as e,L as E,D as _,X as y,Z as z,A as F,E as R,p as D,y as I}from"./index-T_rrs4rL.js";import{R as A}from"./radiobutton.esm-AYgKJWWe.js";const L=(s,a)=>{const[i,c]=u.useState({}),[l,p]=u.useState([]),j=new C,r=u.useRef(),[x,h]=u.useState({size_id:"",price:"",id:""});return u.useEffect(()=>(j.getSizes().then(t=>p(t)),()=>{}),[]),{setAddNewPackage:h,inputPriceRef:r,handelAddNewPackage:()=>{var t,f;!(i!=null&&i.name)||!r.current.value?P.warning("warning","Please Fill The Reqriure Inputs"):((t=s.values)==null?void 0:t[a||"sizes"].some(n=>parseInt(n.size_id)===parseInt(x.size_id)))?P.warning("warning","Please Don't Add Duplicate Package"):(s.setFieldValue(a||"sizes",[...(f=s.values)==null?void 0:f[a||"sizes"],{...x,id:x==null?void 0:x.size_id}]),c({}),r.current.value="",P.success("success","Package Add Successfully"))},removePackage:t=>{var f,g;return(g=(f=s.values)==null?void 0:f[a||"sizes"])==null?void 0:g.filter(n=>+n.id!=+t)},selectedSize:i,setSelectedSize:c,options:l}};function T({formik:s,optionLabel:a,classNames:i,placeholder:c,label:l,inputLabel:p,hasAddButton:j,formikKey:r,inputPlaceholder:x}){const{inputWeightRef:h,setAddNewPackage:v,inputPriceRef:N,handelAddNewPackage:t,removePackage:f,selectedSize:g,options:n,setSelectedSize:o}=L(s,r);return e.jsxs("div",{className:`rounded-[20px] mt-20 border border-[#252525] p-[32px] grid grid-cols-12 gap-10 ${i}`,children:[e.jsxs("form",{onSubmit:d=>d.preventDefault(),className:"col-span-6",children:[e.jsxs("div",{className:"mb-8",children:[j?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-[18px] text-[#252525] font-medium",children:"Talla"}),e.jsx(E,{to:"/products/plans/size/list/add-size",className:"flex items-center cursor-pointer",children:e.jsx("h2",{className:"font-medium underline text-[#45B8EA] me-3",children:"Añadir Talla"})})]}):e.jsx("label",{className:"text-[18px] text-[#252525] font-medium",children:l}),e.jsx(_,{ref:h,value:g,filter:!0,onChange:d=>{v(m=>{var b,w,S;return{...m,size_id:(b=d.target.value)==null?void 0:b.id,weight:(w=d.target.value)==null?void 0:w.weight,name:(S=d.target.value)==null?void 0:S.name}}),o(d.value)},options:n,optionLabel:a||"name",placeholder:c||"Seleccionar Talla",className:"w-full p-2  !shadow-none !rounded-none !border-t-transparent !border-l-transparent !border-r-transparent"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"PriceEuro",className:"text-[18px] text-[#252525] font-medium",children:p}),e.jsx(y,{type:"number",ref:N,placeholder:x,onChange:d=>v(m=>({...m,price:d.target.value})),id:"PriceEuro"})]}),e.jsx("button",{type:"button",onClick:t,className:"bg-[#58291E] text-[20px] text-center text-white font-medium w-full py-[16px] px-[24px] rounded-full",children:"Añadir Paquete"})]}),e.jsx(z,{formik:s,removePackage:f,formikKey:r,options:n})]})}const V=s=>{var g;const[a,i]=u.useState([]),c=new C,[l,p]=u.useState({}),[j,r]=u.useState([]),{userPeressmisons:x,user:h,setIsLoading:v}=u.useContext(F),N=n=>R(x,n),t=h==null?void 0:h.provider;return u.useEffect(()=>(v(!0),c.getRoasters().then(n=>i(n)).finally(n=>v(!1)),()=>{}),[]),u.useEffect(()=>{var n,o;if(t!=null&&t.id){const d=a==null?void 0:a.filter(m=>m.id===(t==null?void 0:t.id));r((n=d[0])==null?void 0:n.coffee_shops)}else{const d=a==null?void 0:a.filter(m=>{var b;return m.id===((b=s.values)==null?void 0:b.provider_id)});r((o=d[0])==null?void 0:o.coffee_shops)}},[(g=s.values)==null?void 0:g.provider_id,t,a]),u.useEffect(()=>((l==null?void 0:l.provider_id)&&c.getRoasters().then(o=>{var d;if(i(o),t){const m=(d=o==null?void 0:o.filter(b=>(b==null?void 0:b.id)===(t==null?void 0:t.id)))==null?void 0:d[0];r(m==null?void 0:m.coffee_shops)}}),()=>{}),[l]),{roasters:a,coffee:j,provider:t,handleChangeProvider:n=>{var o;s.setFieldValue("provider_id",(o=n.target.value)==null?void 0:o.id),s.setFieldValue("coffee_shops",[]),s.setFieldValue("sizes",[]),s.setFieldValue("products",[])},isHasPermissions:N,setAddedShops:p,addedShops:l}};function B({formik:s}){var a,i,c,l;return e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{className:"text-[18px] text-[#252525] font-medium block mb-4",children:"Estado"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center cursor-pointer me-5",children:[e.jsx(A,{inputId:"ingredient1",name:"active",value:"active",onChange:p=>s.setFieldValue("status",p.value),checked:((a=s.values)==null?void 0:a.status)==="active"}),e.jsx("label",{htmlFor:"ingredient1",className:`ms-2 !mb-0 font-medium ${((i=s.values)==null?void 0:i.status)==="active"?"text-[#28C76F]":"text-[#2525256d]"}`,children:"Activo"})]}),e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx(A,{inputId:"inactive",name:"inactive",value:"inactive",onChange:p=>s.setFieldValue("status",p.value),checked:((c=s.values)==null?void 0:c.status)==="inactive"}),e.jsx("label",{htmlFor:"inactive",className:`ms-2 !mb-0 font-medium ${((l=s.values)==null?void 0:l.status)==="inactive"?"text-[#28C76F]":"text-[#2525256d]"}`,children:"Inactivo"})]})]})]})}function $({formik:s,clickHandler:a}){var h,v;const{roasters:i,coffee:c,provider:l,handleChangeProvider:p,isHasPermissions:j,setAddedShops:r,addedShops:x}=V(s);return e.jsxs("form",{onSubmit:N=>N.preventDefault(),className:"px-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"sm:w-[48%]",children:[e.jsx("label",{htmlFor:"plan-name",className:"text-[18px] text-[#252525] font-medium",children:"Nombre Plan"}),e.jsx("input",{type:"text",id:"plan-name",name:"name",value:(h=s.values)==null?void 0:h.name,onChange:s.handleChange,className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Este sera el nombre que se verá en la aplicacion"})]}),e.jsx(B,{formik:s})]}),l!=null&&l.id?null:e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-[18px] text-[#252525] font-medium",children:"Nombre del Tostador"}),j("dashboard.providers.store")?e.jsx(E,{to:"/groups/roasters/add-roaster",className:"flex items-center cursor-pointer",children:e.jsx("h2",{className:"font-medium underline text-[#45B8EA] me-3",children:"Añadir Tostador"})}):null]}),e.jsx(_,{value:D(i,"id",(v=s==null?void 0:s.values)==null?void 0:v.provider_id),onChange:p,filter:!0,options:i,optionLabel:"commercial_name",placeholder:"Seleccionar Tostador Name",className:"w-full p-2  !shadow-none !rounded-none !border-t-transparent !border-l-transparent !border-r-transparent"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"Description",className:"text-[18px] text-[#252525] font-medium",children:"Descripción"}),e.jsx("textarea",{onChange:s.handleChange,value:s.values.description,name:"description",rows:5,type:"text",id:"Description",className:"p-3 w-full border rounded-[5px] mt-5 resize-none border-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Esta sera la descripcion que se verá en la aplicacion"})]}),e.jsx(I,{formik:s,dataKey:"coffee_shops",url:"/setups/coffee-shop/add-coffee",title:"Tiendas",pageKey:"Coffee Shops",stateList:r,listOfState:x,pagePermissionKeyName:"dashboard.coffeeShops.store",options:c}),e.jsx(T,{formik:s,optionLabel:"name",inputLabel:"Precio",label:"Talla"}),e.jsx("div",{className:"flex items-center justify-end mt-10",children:e.jsx("button",{onClick:a,type:"submit",className:"bg-[#45B8EA] text-white py-[16px] px-32 rounded-full",children:"Enviar"})})]})}export{$ as P};
