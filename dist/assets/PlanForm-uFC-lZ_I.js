import{r as p,G as A,h as P,j as e,L as _,D as z,I as E,Z as F,A as R,E as y,p as I,y as D}from"./index-oURgFu_2.js";import{R as C}from"./radiobutton.esm-DnO55RuI.js";const L=(s,a)=>{const[i,c]=p.useState({}),[d,h]=p.useState([]),g=new A,r=p.useRef(),[o,x]=p.useState({size_id:"",price:"",id:""});return p.useEffect(()=>(g.getSizes().then(t=>h(t)),()=>{}),[]),{setAddNewPackage:x,inputPriceRef:r,handelAddNewPackage:()=>{var t,b;!(i!=null&&i.name)||!r.current.value?P.warning("warning","Please Fill The Reqriure Inputs"):((t=s.values)==null?void 0:t[a||"sizes"].some(l=>parseInt(l.size_id)===parseInt(o.size_id)))?P.warning("warning","Please Don't Add Duplicate Package"):(s.setFieldValue(a||"sizes",[...(b=s.values)==null?void 0:b[a||"sizes"],{...o,id:o==null?void 0:o.size_id}]),c({}),r.current.value="",P.success("success","Package Add Successfully"))},removePackage:t=>{var b,f;return(f=(b=s.values)==null?void 0:b[a||"sizes"])==null?void 0:f.filter(l=>+l.id!=+t)},selectedSize:i,setSelectedSize:c,options:d}};function T({formik:s,optionLabel:a,classNames:i,placeholder:c,label:d,inputLabel:h,hasAddButton:g,formikKey:r,inputPlaceholder:o}){const{inputWeightRef:x,setAddNewPackage:j,inputPriceRef:N,handelAddNewPackage:t,removePackage:b,selectedSize:f,options:l,setSelectedSize:u}=L(s,r);return e.jsxs("div",{className:`rounded-[20px] mt-20 border border-[#252525] p-3 sm:p-[32px] grid grid-cols-12 gap-3 md:gap-10 ${i}`,children:[e.jsxs("form",{onSubmit:n=>n.preventDefault(),autoComplete:"off",className:"col-span-12 md:col-span-6",children:[e.jsxs("div",{className:"mb-8",children:[g?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"label",children:"Talla"}),e.jsx(_,{to:"/products/plans/size/list/add-size",className:"flex items-center cursor-pointer",children:e.jsx("h2",{className:"font-medium underline text-[#45B8EA] me-3",children:"Añadir Talla"})})]}):e.jsx("label",{className:"label",children:d}),e.jsx(z,{ref:x,value:f,filter:!0,onChange:n=>{j(m=>{var v,w,S;return{...m,size_id:(v=n.target.value)==null?void 0:v.id,weight:(w=n.target.value)==null?void 0:w.weight,name:(S=n.target.value)==null?void 0:S.name}}),u(n.value)},options:l,optionLabel:a||"name",placeholder:c||"Seleccionar Talla",className:"w-full p-2  !shadow-none !rounded-none !border-t-transparent !border-l-transparent !border-r-transparent"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"PriceEuro",className:"label",children:h}),e.jsx(E,{type:"number",ref:N,placeholder:o,onChange:n=>j(m=>({...m,price:n.target.value})),id:"PriceEuro"})]}),e.jsx("button",{type:"button",onClick:t,className:"bg-[#58291E] text-[20px] text-center text-white font-medium w-full py-[16px] px-[24px] rounded-full",children:"Añadir Paquete"})]}),e.jsx(F,{formik:s,removePackage:b,formikKey:r,options:l})]})}const V=s=>{var f;const[a,i]=p.useState([]),c=new A,[d,h]=p.useState({}),[g,r]=p.useState([]),{userPeressmisons:o,user:x,setIsLoading:j}=p.useContext(R),N=l=>y(o,l),t=x==null?void 0:x.provider;return p.useEffect(()=>(j(!0),c.getRoasters().then(l=>i(l)).finally(l=>j(!1)),()=>{}),[]),p.useEffect(()=>{var l,u;if(t!=null&&t.id){const n=a==null?void 0:a.filter(m=>m.id===(t==null?void 0:t.id));r((l=n[0])==null?void 0:l.coffee_shops)}else{const n=a==null?void 0:a.filter(m=>{var v;return m.id===((v=s.values)==null?void 0:v.provider_id)});r((u=n[0])==null?void 0:u.coffee_shops)}},[(f=s.values)==null?void 0:f.provider_id,t,a]),p.useEffect(()=>((d==null?void 0:d.provider_id)&&c.getRoasters().then(u=>{var n;if(i(u),t){const m=(n=u==null?void 0:u.filter(v=>(v==null?void 0:v.id)===(t==null?void 0:t.id)))==null?void 0:n[0];r(m==null?void 0:m.coffee_shops)}}),()=>{}),[d]),{roasters:a,coffee:g,provider:t,handleChangeProvider:l=>{var u;s.setFieldValue("provider_id",(u=l.target.value)==null?void 0:u.id),s.setFieldValue("coffee_shops",[]),s.setFieldValue("sizes",[]),s.setFieldValue("products",[])},isHasPermissions:N,setAddedShops:h,addedShops:d}};function q({formik:s}){var a,i,c,d;return e.jsxs("div",{className:"w-full sm:w-[48%]",children:[e.jsx("label",{className:"label block mb-4",children:"Estado"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center cursor-pointer me-5",children:[e.jsx(C,{inputId:"ingredient1",name:"active",value:"active",onChange:h=>s.setFieldValue("status",h.value),checked:((a=s.values)==null?void 0:a.status)==="active"}),e.jsx("label",{htmlFor:"ingredient1",className:`ms-2 !mb-0 font-medium ${((i=s.values)==null?void 0:i.status)==="active"?"text-[#28C76F]":"text-[#2525256d]"}`,children:"Activo"})]}),e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx(C,{inputId:"inactive",name:"inactive",value:"inactive",onChange:h=>s.setFieldValue("status",h.value),checked:((c=s.values)==null?void 0:c.status)==="inactive"}),e.jsx("label",{htmlFor:"inactive",className:`ms-2 !mb-0 font-medium ${((d=s.values)==null?void 0:d.status)==="inactive"?"text-[#28C76F]":"text-[#2525256d]"}`,children:"Inactivo"})]})]})]})}function $({formik:s}){var o,x;const{roasters:a,coffee:i,provider:c,handleChangeProvider:d,isHasPermissions:h,setAddedShops:g,addedShops:r}=V(s);return e.jsxs("form",{onSubmit:s.handleSubmit,autoComplete:"off",className:"px-3 sm:px-10",children:[e.jsxs("div",{className:"flex-container",children:[e.jsxs("div",{className:"w-full sm:w-[48%]",children:[e.jsx("label",{htmlFor:"plan-name",className:"label",children:"Nombre Plan"}),e.jsx(E,{type:"text",id:"plan-name",name:"name",required:!0,value:(o=s.values)==null?void 0:o.name,onChange:s.handleChange,placeholder:"Este sera el nombre que se verá en la aplicacion"})]}),e.jsx(q,{formik:s})]}),c!=null&&c.id?null:e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"label",children:"Nombre del Tostador"}),h("dashboard.providers.store")?e.jsx(_,{to:"/groups/roasters/add-roaster",className:"flex items-center cursor-pointer",children:e.jsx("h2",{className:"font-medium underline text-[#45B8EA] me-3",children:"Añadir Tostador"})}):null]}),e.jsx(z,{value:I(a,"id",(x=s==null?void 0:s.values)==null?void 0:x.provider_id),onChange:d,filter:!0,options:a,optionLabel:"commercial_name",placeholder:"Seleccionar Tostador Name",className:"w-full p-2  !shadow-none !rounded-none !border-t-transparent !border-l-transparent !border-r-transparent"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"Description",className:"label",children:"Descripción"}),e.jsx("textarea",{onChange:s.handleChange,value:s.values.description,name:"description",rows:5,type:"text",id:"Description",className:"p-3 w-full border rounded-[5px] mt-5 resize-none border-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Esta sera la descripcion que se verá en la aplicacion"})]}),e.jsx(D,{formik:s,dataKey:"coffee_shops",url:"/setups/coffee-shop/add-coffee",title:"Tiendas",pageKey:"Coffee Shops",stateList:g,listOfState:r,pagePermissionKeyName:"dashboard.coffeeShops.store",options:i}),e.jsx(T,{formik:s,optionLabel:"name",inputLabel:"Precio",label:"Talla"}),e.jsx("button",{type:"submit",className:"min-btn block !mt-10 ml-auto",children:"Enviar"})]})}export{$ as P};
