import{r as u,G as A,h as P,j as e,L as _,D as z,I as E,Z as F,A as R,E as y,p as D,y as I}from"./index-UqVmnRqZ.js";import{R as C}from"./radiobutton.esm-Id6wKql4.js";const L=(s,t)=>{const[i,d]=u.useState({}),[n,p]=u.useState([]),j=new A,r=u.useRef(),[h,x]=u.useState({size_id:"",price:"",id:""});return u.useEffect(()=>(j.getSizes().then(a=>p(a)),()=>{}),[]),{setAddNewPackage:x,inputPriceRef:r,handelAddNewPackage:()=>{var a,g;!(i!=null&&i.name)||!r.current.value?P.warning("warning","Please Fill The Reqriure Inputs"):((a=s.values)==null?void 0:a[t||"sizes"].some(l=>parseInt(l.size_id)===parseInt(h.size_id)))?P.warning("warning","Please Don't Add Duplicate Package"):(s.setFieldValue(t||"sizes",[...(g=s.values)==null?void 0:g[t||"sizes"],{...h,id:h==null?void 0:h.size_id}]),d({}),r.current.value="",P.success("success","Package Add Successfully"))},removePackage:a=>{var g,f;return(f=(g=s.values)==null?void 0:g[t||"sizes"])==null?void 0:f.filter(l=>+l.id!=+a)},selectedSize:i,setSelectedSize:d,options:n}};function T({formik:s,optionLabel:t,classNames:i,placeholder:d,label:n,inputLabel:p,hasAddButton:j,formikKey:r,inputPlaceholder:h}){const{inputWeightRef:x,setAddNewPackage:v,inputPriceRef:N,handelAddNewPackage:a,removePackage:g,selectedSize:f,options:l,setSelectedSize:o}=L(s,r);return e.jsxs("div",{className:`rounded-[20px] mt-20 border border-[#252525] p-[32px] grid grid-cols-12 gap-10 ${i}`,children:[e.jsxs("form",{onSubmit:c=>c.preventDefault(),className:"col-span-6",children:[e.jsxs("div",{className:"mb-8",children:[j?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"label",children:"Talla"}),e.jsx(_,{to:"/products/plans/size/list/add-size",className:"flex items-center cursor-pointer",children:e.jsx("h2",{className:"font-medium underline text-[#45B8EA] me-3",children:"Añadir Talla"})})]}):e.jsx("label",{className:"label",children:n}),e.jsx(z,{ref:x,value:f,filter:!0,onChange:c=>{v(m=>{var b,w,S;return{...m,size_id:(b=c.target.value)==null?void 0:b.id,weight:(w=c.target.value)==null?void 0:w.weight,name:(S=c.target.value)==null?void 0:S.name}}),o(c.value)},options:l,optionLabel:t||"name",placeholder:d||"Seleccionar Talla",className:"w-full p-2  !shadow-none !rounded-none !border-t-transparent !border-l-transparent !border-r-transparent"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"PriceEuro",className:"label",children:p}),e.jsx(E,{type:"number",ref:N,placeholder:h,onChange:c=>v(m=>({...m,price:c.target.value})),id:"PriceEuro"})]}),e.jsx("button",{type:"button",onClick:a,className:"bg-[#58291E] text-[20px] text-center text-white font-medium w-full py-[16px] px-[24px] rounded-full",children:"Añadir Paquete"})]}),e.jsx(F,{formik:s,removePackage:g,formikKey:r,options:l})]})}const V=s=>{var f;const[t,i]=u.useState([]),d=new A,[n,p]=u.useState({}),[j,r]=u.useState([]),{userPeressmisons:h,user:x,setIsLoading:v}=u.useContext(R),N=l=>y(h,l),a=x==null?void 0:x.provider;return u.useEffect(()=>(v(!0),d.getRoasters().then(l=>i(l)).finally(l=>v(!1)),()=>{}),[]),u.useEffect(()=>{var l,o;if(a!=null&&a.id){const c=t==null?void 0:t.filter(m=>m.id===(a==null?void 0:a.id));r((l=c[0])==null?void 0:l.coffee_shops)}else{const c=t==null?void 0:t.filter(m=>{var b;return m.id===((b=s.values)==null?void 0:b.provider_id)});r((o=c[0])==null?void 0:o.coffee_shops)}},[(f=s.values)==null?void 0:f.provider_id,a,t]),u.useEffect(()=>((n==null?void 0:n.provider_id)&&d.getRoasters().then(o=>{var c;if(i(o),a){const m=(c=o==null?void 0:o.filter(b=>(b==null?void 0:b.id)===(a==null?void 0:a.id)))==null?void 0:c[0];r(m==null?void 0:m.coffee_shops)}}),()=>{}),[n]),{roasters:t,coffee:j,provider:a,handleChangeProvider:l=>{var o;s.setFieldValue("provider_id",(o=l.target.value)==null?void 0:o.id),s.setFieldValue("coffee_shops",[]),s.setFieldValue("sizes",[]),s.setFieldValue("products",[])},isHasPermissions:N,setAddedShops:p,addedShops:n}};function q({formik:s}){var t,i,d,n;return e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{className:"label block mb-4",children:"Estado"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center cursor-pointer me-5",children:[e.jsx(C,{inputId:"ingredient1",name:"active",value:"active",onChange:p=>s.setFieldValue("status",p.value),checked:((t=s.values)==null?void 0:t.status)==="active"}),e.jsx("label",{htmlFor:"ingredient1",className:`ms-2 !mb-0 font-medium ${((i=s.values)==null?void 0:i.status)==="active"?"text-[#28C76F]":"text-[#2525256d]"}`,children:"Activo"})]}),e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx(C,{inputId:"inactive",name:"inactive",value:"inactive",onChange:p=>s.setFieldValue("status",p.value),checked:((d=s.values)==null?void 0:d.status)==="inactive"}),e.jsx("label",{htmlFor:"inactive",className:`ms-2 !mb-0 font-medium ${((n=s.values)==null?void 0:n.status)==="inactive"?"text-[#28C76F]":"text-[#2525256d]"}`,children:"Inactivo"})]})]})]})}function $({formik:s,clickHandler:t}){var x,v;const{roasters:i,coffee:d,provider:n,handleChangeProvider:p,isHasPermissions:j,setAddedShops:r,addedShops:h}=V(s);return e.jsxs("form",{onSubmit:N=>N.preventDefault(),className:"px-10",children:[e.jsxs("div",{className:"flex-container",children:[e.jsxs("div",{className:"sm:w-[48%]",children:[e.jsx("label",{htmlFor:"plan-name",className:"label",children:"Nombre Plan"}),e.jsx(E,{type:"text",id:"plan-name",name:"name",value:(x=s.values)==null?void 0:x.name,onChange:s.handleChange,placeholder:"Este sera el nombre que se verá en la aplicacion"})]}),e.jsx(q,{formik:s})]}),n!=null&&n.id?null:e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"label",children:"Nombre del Tostador"}),j("dashboard.providers.store")?e.jsx(_,{to:"/groups/roasters/add-roaster",className:"flex items-center cursor-pointer",children:e.jsx("h2",{className:"font-medium underline text-[#45B8EA] me-3",children:"Añadir Tostador"})}):null]}),e.jsx(z,{value:D(i,"id",(v=s==null?void 0:s.values)==null?void 0:v.provider_id),onChange:p,filter:!0,options:i,optionLabel:"commercial_name",placeholder:"Seleccionar Tostador Name",className:"w-full p-2  !shadow-none !rounded-none !border-t-transparent !border-l-transparent !border-r-transparent"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"Description",className:"label",children:"Descripción"}),e.jsx("textarea",{onChange:s.handleChange,value:s.values.description,name:"description",rows:5,type:"text",id:"Description",className:"p-3 w-full border rounded-[5px] mt-5 resize-none border-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Esta sera la descripcion que se verá en la aplicacion"})]}),e.jsx(I,{formik:s,dataKey:"coffee_shops",url:"/setups/coffee-shop/add-coffee",title:"Tiendas",pageKey:"Coffee Shops",stateList:r,listOfState:h,pagePermissionKeyName:"dashboard.coffeeShops.store",options:d}),e.jsx(T,{formik:s,optionLabel:"name",inputLabel:"Precio",label:"Talla"}),e.jsx("button",{onClick:t,type:"submit",className:"min-btn block !mt-10 ml-auto",children:"Enviar"})]})}export{$ as P};
