import{r,A as p,g as F,j as e,L as g,F as h,aj as b,u as w}from"./index-rFxOd0i4.js";import{A as f,v as N}from"./login-vector-mMVxKymG.js";const y=()=>{const[o,n]=r.useState(!1),s=sessionStorage.getItem("valid-otp")?2:sessionStorage.getItem("email")?1:0,[t,l]=r.useState(s),c=new f,[i,x]=r.useState({email:"",password:""}),{setIsLoading:u}=r.useContext(p);return{checked:o,setChecked:n,data:i,setData:x,handelSubmit:a=>(a.preventDefault(),u(!0),c.forgetPassword({email:i==null?void 0:i.email}).then(m=>F.success("Actualizado!","Código de restablecimiento de contraseña enviado a tu correo electrónico.")).then(m=>{l(1),sessionStorage.setItem("email",i==null?void 0:i.email)}).finally(m=>u(!1))),activeIndex:t,setActiveIndex:l}},k="/assets/lock-xf8dIxxJ.png";function S({setData:o,handelSubmit:n}){return e.jsxs(r.Fragment,{children:[e.jsxs(g,{to:"/login",className:"flex items-center mb-10 cursor-pointer",children:[e.jsx(h,{icon:b}),e.jsx("span",{className:"ms-3 text-[#252525]",children:"Volver a iniciar sesión"})]}),e.jsx("img",{src:k,className:"m-auto mb-4"}),e.jsxs("form",{onSubmit:n,autoComplete:"off",children:[e.jsx("h3",{className:"text-[24px] text-[#252525] text-center mb-2 font-medium",children:"Olvidar Contraseña"}),e.jsx("h5",{className:"text-[#252525] max-w-[380px] text-center mb-8",children:"Ingresa tu correo electrónico y te enviaremos un código para restablecer tu contraseña."}),e.jsx("label",{className:"block font-[400] text-[14px]",htmlFor:"email",children:"Dirección de correo electrónico"}),e.jsx("input",{autoFocus:!0,onChange:s=>o(t=>({...t,email:s.target.value})),id:"email",type:"email",className:"w-full mb-6 h-[40px] px-5 rounded-[8px]",style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"}}),e.jsx("button",{className:"w-full h-[45px] mt-[16px] text-center rounded-[8px] text-white bg-[#45B8EA]",style:{backdropFilter:"blur(12.343469619750977px)"},children:"Enviar"})]})]})}const C=o=>{const n=r.useRef(),s=r.useRef(),t=r.useRef(),l=r.useRef(),c=r.useRef(),i=r.useRef(),[x,u]=r.useState({1:"",2:"",3:"",4:"",5:"",6:""}),d=(a,m)=>{const j=a.target.value;return j.length&&(u(v=>({...v,[a.target.name]:j})),m&&m.current.focus()),null};return r.useEffect(()=>{o(a=>({...a,code:Object.values(x).join("")}))},[x]),{first_inputRef:n,second_inputRef:s,thired_inputRef:t,fourth_inputRef:l,fifth_inputRef:c,sixth_inputRef:i,handleChange:d,value:x}};function _({setUpdatePasswordData:o,invalid:n}){const{first_inputRef:s,second_inputRef:t,thired_inputRef:l,fourth_inputRef:c,fifth_inputRef:i,sixth_inputRef:x,handleChange:u}=C(o),d=`rounded-[8px] border border-[rgba(255,_255,_255,_0.40)] w-[calc(100%/6)] sm:w-[62px] h-[40px] sm:h-[74px] transition px-4 ${n?"!border-[red] !text-[red]":""} text-center text-[20px] sm:text-[30px] me-2 sm:me-6 flex items-center justify-center`;return e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-center mb-7 sm:mb-[48px] ",children:[e.jsx("input",{type:"text",name:"1",ref:s,onChange:a=>u(a,t),maxLength:1,autoFocus:!0,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${d}`}),e.jsx("input",{type:"text",name:"2",ref:t,onChange:a=>u(a,l),maxLength:1,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${d}`}),e.jsx("input",{type:"text",name:"3",ref:l,onChange:a=>u(a,c),maxLength:1,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${d}`}),e.jsx("input",{type:"text",name:"4",ref:c,onChange:a=>u(a,i),maxLength:1,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${d}`}),e.jsx("input",{type:"text",name:"5",ref:i,onChange:a=>u(a,x),maxLength:1,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${d}`}),e.jsx("input",{type:"text",name:"6",ref:x,onChange:a=>u(a),maxLength:1,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${d}`})]})})}const I=o=>{const[n,s]=r.useState(null),[t,l]=r.useState(!1),c=sessionStorage.getItem("email"),{setIsLoading:i}=r.useContext(p),x=new f;return{code:n,setCode:s,handelSubmit:d=>(d.preventDefault(),i(!0),x.verifyOtp({email:c,otp:Number(n.code)}).then(a=>(o(2),sessionStorage.setItem("valid-otp",n.code))).catch(a=>l(!0)).finally(a=>i(!1))),email:c,invalid:t,setInvalid:l}};function R({setActiveIndex:o}){const{handelSubmit:n,code:s,email:t,invalid:l,setCode:c}=I(o);return e.jsxs(r.Fragment,{children:[e.jsxs(g,{to:"/login",onClick:()=>sessionStorage.clear(),className:"flex items-center mb-5 sm:mb-10 cursor-pointer",children:[e.jsx(h,{icon:b}),e.jsx("span",{className:"ms-3 text-[#252525]",children:"Volver a iniciar sesión"})]}),e.jsxs("form",{onSubmit:n,autoComplete:"off",children:[e.jsx("h3",{className:"text-[24px] text-[#252525] text-center mb-2 font-medium",children:"Olvidar Contraseña"}),e.jsxs("h5",{className:"text-[#252525] max-w-[380px] text-center mb-8 mx-auto",children:["Por favor, introduce el código enviado a tu correo electrónico. ",e.jsx("br",{})," ",t]}),e.jsx(_,{setUpdatePasswordData:c,data:s,invalid:l}),e.jsx("button",{className:"w-full h-[45px] mt-[16px] text-center rounded-[8px] text-white bg-[#45B8EA]",style:{backdropFilter:"blur(12.343469619750977px)"},children:"Enviar"})]})]})}const A=()=>{const o=sessionStorage.getItem("email"),n=sessionStorage.getItem("valid-otp"),[s,t]=r.useState({}),l=w(),{setIsLoading:c}=r.useContext(p),i=new f;return{email:o,handleSubmit:u=>(u.preventDefault(),c(!0),i.resetPassword({...s,email:o,otp:n}).then(d=>F.success("Actualizado!","Contraseña cambiada con éxito.").then(a=>(sessionStorage.clear(),l("/login")))).finally(d=>c(!1))),setData:t}};function D({}){const{email:o,setData:n,handleSubmit:s}=A();return e.jsxs(r.Fragment,{children:[e.jsxs(g,{to:"/login",onClick:t=>sessionStorage.clear(),className:"flex items-center mb-10 cursor-pointer",children:[e.jsx(h,{icon:b}),e.jsx("span",{className:"ms-3 text-[#252525]",children:"Volver a iniciar sesión"})]}),e.jsxs("form",{onSubmit:s,autoComplete:"off",className:"w-full sm:w-[400px]",children:[e.jsx("h3",{className:"text-[24px] text-[#252525] text-center mb-2 font-medium",children:"Olvidar Contraseña"}),e.jsxs("h5",{className:"text-[#252525] text-center mb-8",children:["Ingresa una nueva contraseña para ",o]}),e.jsx("label",{className:"block font-[400] text-[14px]",htmlFor:"password",children:"Ingresa una nueva contraseña"}),e.jsx("input",{autoFocus:!0,onChange:t=>n(l=>({...l,password:t.target.value})),id:"password",type:"password",className:"w-full mb-4 h-[40px] px-5 rounded-[8px]",style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"}}),e.jsx("label",{className:"block font-[400] text-[14px]",htmlFor:"conf_password",children:"Confirmar contraseña"}),e.jsx("input",{onChange:t=>n(l=>({...l,password_confirmation:t.target.value})),id:"conf_password",type:"password",className:"w-full mb-6 h-[40px] px-5 rounded-[8px]",style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"}}),e.jsx("button",{className:"w-full h-[45px] mt-[16px] text-center rounded-[8px] text-white bg-[#45B8EA]",style:{backdropFilter:"blur(12.343469619750977px)"},children:"Restablecer la contraseña"})]})]})}function E(){const{setData:o,handelSubmit:n,activeIndex:s,setActiveIndex:t}=y();return e.jsxs("div",{className:"login w-full h-[100vh] flex items-center justify-center",style:{background:"linear-gradient(90deg, rgba(216,225,252,1) 0%, rgba(191,203,241,1) 33%, rgba(176,195,255,1) 100%)"},children:[e.jsx("img",{src:N,className:"absolute right-0 bottom-0"}),e.jsx("div",{className:"container flex justify-center items-center",children:e.jsx("div",{className:"min-h-[450px] flex items-center justify-center",children:e.jsxs("div",{className:"p-4 sm:p-8 h-full rounded-[10px]",style:{background:"linear-gradient(120deg, rgba(241, 241, 241, 0.43) -45.57%, rgba(243, 243, 243, 0.00) 134.89%)",backdropFilter:"blur(5px)",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.25)"},children:[s===0?e.jsx(S,{handelSubmit:n,setData:o,setActiveIndex:t}):null,s===1?e.jsx(R,{setActiveIndex:t}):null,s===2?e.jsx(D,{setActiveIndex:t}):null,e.jsxs("div",{className:"flex items-center justify-center mt-10",children:[e.jsx("div",{className:`w-[19px] h-[19px] rounded-full ${s===0?"bg-[var(--primary-color)]":"bg-white"} me-4`,children:"  "}),e.jsx("div",{className:`w-[19px] h-[19px] rounded-full ${s===1?"bg-[var(--primary-color)]":"bg-white"} me-4`,children:"  "}),e.jsx("div",{className:`w-[19px] h-[19px] rounded-full ${s===2?"bg-[var(--primary-color)]":"bg-white"} me-4`,children:"  "})]})]})})})]})}export{E as default};
