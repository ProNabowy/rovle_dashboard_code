import{n as S,r as c,A,l as k,G as u,h as p,U as j,j as w,P as y}from"./index-oURgFu_2.js";import{P as U}from"./ProductsForm-dB9hmjuW.js";const V=()=>{const s=S().search,P=new u,x=new j,{setIsLoading:e}=c.useContext(A),f=s.slice(4),[E,b]=c.useState({}),g=k({initialValues:E,onSubmit:o=>{var i,m,h,_,l,t;if(!((i=o==null?void 0:o.presentations)!=null&&i.length)||!(o!=null&&o.provider_id)||!((m=o==null?void 0:o.origins)!=null&&m.length)){if(!(o!=null&&o.provider_id))return p.warning("Advertencia","El campo del tostador es necesario, por favor complÃ©telo.");if(!((h=o==null?void 0:o.origins)!=null&&h.length))return p.warning("Advertencia","Es necesario completar el campo de Origen, por favor.");if(!((_=o==null?void 0:o.presentations)!=null&&_.length))return p.warning("Advertencia","Es necesario completar el campo de presentaciones, por favor.")}else{const n={...o};return n.origins=(l=n==null?void 0:n.origins)==null?void 0:l.map(r=>(r==null?void 0:r.id)||r),n.coffeeShops=(t=n==null?void 0:n.coffeeShops)==null?void 0:t.map(r=>(r==null?void 0:r.id)||r),e(!0),x.updateProduct(f,n).finally(r=>e(!1))}}});return c.useEffect(()=>(e(!0),P.getSingleProduct(f).then(o=>{const i={commercial_name:o==null?void 0:o.commercial_name,code:o==null?void 0:o.code,trade_name:o==null?void 0:o.trade_name,region:o==null?void 0:o.region,farm:o==null?void 0:o.farm,sca_score:o==null?void 0:o.sca_score,altitude:o==null?void 0:o.altitude,process:o==null?void 0:o.process,grades:o==null?void 0:o.grades,provider_id:o==null?void 0:o.provider_id,stock:o==null?void 0:o.stock,description:o==null?void 0:o.description,presentations:o==null?void 0:o.presentations,origins:o==null?void 0:o.origins,coffeeShops:o==null?void 0:o.coffee_shops,owner_name:o==null?void 0:o.owner_name};g.setValues(i)}).finally(o=>e(!1)),()=>{}),[]),{formik:g}};function G(){const{formik:s}=V();return w.jsx(y,{title:"Formulario de Producto",showActions:!1,children:w.jsx(U,{formik:s})})}export{G as default};
