import{r as c,u as v,A as f,l as x,G as h,o as g,S as j,j as t,P as N,D as _,p as y,I as C}from"./index-oURgFu_2.js";const k=()=>{var u,b;const[r,i]=c.useState([]),p=new j,o=new h,l=v(),{setIsLoading:a,user:e}=c.useContext(f),s=x({initialValues:{name:"",provider_id:(u=e==null?void 0:e.provider)==null?void 0:u.id}});c.useEffect(()=>{var n,m;return(n=e==null?void 0:e.provider)!=null&&n.id&&s.setFieldValue("provider_id",(m=e==null?void 0:e.provider)==null?void 0:m.id),()=>{}},[(b=e==null?void 0:e.provider)==null?void 0:b.id]),c.useEffect(()=>(a(!0),o.getRoasters().then(n=>i(n)).finally(n=>a(!1)),()=>{}),[]);const d=g(n=>(a(!0),p.addOrigin(s.values,l).finally(m=>a(!1))));return{formik:s,roasters:r,clickHandler:d,user:e}};function O(){var l,a,e;const{formik:r,roasters:i,clickHandler:p,user:o}=k();return t.jsx(N,{title:"Formulario de OrÃ­genes",showActions:!1,PermissionsKey:"Origins",roleKey:"Add",children:t.jsxs("form",{onSubmit:s=>s.preventDefault(),autoComplete:"off",children:[(l=o==null?void 0:o.provider)!=null&&l.id?null:t.jsxs("div",{className:"p-3 sm:p-10 pb-4",children:[t.jsx("label",{className:"mb-3 block text-[#234486]",children:"Tostadores"}),t.jsx(_,{filter:!0,value:y(i,"id",(a=r==null?void 0:r.values)==null?void 0:a.provider_id),name:"provider_id",onChange:s=>{var d;return r.setFieldValue("provider_id",(d=s.target.value)==null?void 0:d.id)},options:i,optionLabel:"commercial_name",placeholder:"Seleccionar Tostador",className:"w-full p-3 !border-r-[0] !border-l-[0] !border-t-[0] !border-b !border-b-[#b3b3b3] !shadow-none !rounded-none"})]}),t.jsxs("div",{className:"p-3 sm:p-10 pt-4",children:[t.jsx("label",{htmlFor:"name-input",className:"mb-3 block text-[#234486]",children:"Nombre"}),t.jsx(C,{type:"text",name:"name",value:(e=r.values)==null?void 0:e.name,onChange:r.handleChange,placeholder:"Ingresar Nombre del Origen"})]}),t.jsx("div",{className:"flex-end-container",children:t.jsx("button",{type:"submit",onClick:p,className:"min-btn",children:"Enviar"})})]})})}export{O as default};
