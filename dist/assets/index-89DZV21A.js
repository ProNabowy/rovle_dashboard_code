import{r as e,A as S,u as _,h as w,g as i,S as E,j as x,P as j}from"./index-ucQm_BBe.js";import{P as k}from"./ProductsForm-5s2cKRyP.js";const V=()=>{const t=new E,{setIsLoading:s}=e.useContext(S),A=_(),P=o=>{var a,p,f,g,m,h;if(!((a=o==null?void 0:o.presentations)!=null&&a.length)||!(o!=null&&o.provider_id)||!((p=o==null?void 0:o.origins)!=null&&p.length)){if(!(o!=null&&o.provider_id))return i.warning("Advertencia","El campo del tostador es necesario, por favor complÃ©telo.");if(!((f=o==null?void 0:o.origins)!=null&&f.length))return i.warning("Advertencia","Es necesario completar el campo de Origen, por favor.");if(!((g=o==null?void 0:o.presentations)!=null&&g.length))return i.warning("Advertencia","Es necesario completar el campo de presentaciones, por favor.")}else{const n={...o};return n.origins=(m=n==null?void 0:n.origins)==null?void 0:m.map(r=>(r==null?void 0:r.id)||r),n.coffeeShops=(h=n==null?void 0:n.coffeeShops)==null?void 0:h.map(r=>(r==null?void 0:r.id)||r),s(!0),t.addProduct(n,A).finally(r=>s(!1))}},[c,l]=e.useState({commercial_name:"",code:"",trade_name:"",region:"",farm:"",sca_score:80,altitude:1e3,process:"",grades:"",provider_id:"",stock:"",description:"",presentations:[],origins:[],coffeeShops:[]}),d=w({initialValues:{...c},onSubmit:P});return e.useEffect(()=>(d.setValues(c),()=>{}),[]),{formik:d}};function b(){const{formik:t}=V();return x.jsx(j,{title:"Formulario de Producto",showActions:!1,children:x.jsx(k,{formik:t})})}export{b as default};
