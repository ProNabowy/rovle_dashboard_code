import{r as c,A as l,n as h,l as g,G as E,h as r,U as w,j as m,P as y}from"./index-oURgFu_2.js";import{O as A}from"./OffeerForm-2HRf83rl.js";import"./inputtext.esm-xRPDbi-V.js";const x=p=>{const s=new E,d=new w,{setIsLoading:n,user:e}=c.useContext(l),f=h().search.slice(4),i=g({initialValues:{name:"",provider_id:"",description:"",level_id:"",activation_method:"",activation_amount:"",discount:"",duration:"",start_date:"",end_date:"",offer_place:"",discount_type:""},onSubmit:o=>{if(!(o!=null&&o.provider_id)||!(o!=null&&o.level_id)||!(o!=null&&o.activation_method)||!(o!=null&&o.discount_type)||!(o!=null&&o.offer_place)){if(!(o!=null&&o.provider_id))return r.warning("Advertencia","El campo del Tostador es necesario, por favor complételo.");if(!(o!=null&&o.level_id))return r.warning("Advertencia","El campo del Nivel es necesario, por favor complételo.");if(!(o!=null&&o.activation_method))return r.warning("Advertencia","El campo del Activo es necesario, por favor complételo.");if(!(o!=null&&o.discount_type))return r.warning("Advertencia","El campo del T.Promo es necesario, por favor complételo.");if(!(o!=null&&o.offer_place))return r.warning("Advertencia","El campo del Recurrencia es necesario, por favor complételo.")}else return n(!0),d.updateOffeer(f,o).finally(t=>n(!1))}});return c.useEffect(()=>(n(!0),s.getSingleOffeer(f).then(o=>{i.setValues({name:o==null?void 0:o.name,provider_id:o==null?void 0:o.provider_id,description:o==null?void 0:o.description,level_id:(o==null?void 0:o.level_id)||"auto",activation_method:o==null?void 0:o.activation_method,activation_amount:o==null?void 0:o.activation_amount,discount:o==null?void 0:o.discount,duration:o==null?void 0:o.duration,start_date:o==null?void 0:o.start_date,end_date:o==null?void 0:o.end_date,offer_place:o==null?void 0:o.offer_place,discount_type:o==null?void 0:o.discount_type})}).finally(o=>n(!1)),()=>{}),[]),c.useEffect(()=>{var o,t,_;return(o=e==null?void 0:e.provider)!=null&&o.id&&!((t=i==null?void 0:i.values)!=null&&t.provider_id)&&i.setFieldValue("provider_id",(_=e==null?void 0:e.provider)==null?void 0:_.id),()=>{}},[e]),{formik:i}};function b(){const{formik:p}=x();return m.jsx(y,{title:"Formulario de oferta",showActions:!1,children:m.jsx(A,{formik:p})})}export{b as default};
