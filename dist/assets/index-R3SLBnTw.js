import{r as s,A,u as _,h as x,g as l,S as w,j as u,P as E}from"./index-rFxOd0i4.js";import{P as S}from"./PlanForm-vhPcBd4W.js";const j=()=>{const{user:r,setIsLoading:a}=s.useContext(A),P=new w,e=r==null?void 0:r.provider;r==null||r.created_by_provider;const g=t=>{var c,d,p,f;if(!(t!=null&&t.provider_id)||!((c=t==null?void 0:t.sizes)!=null&&c.length)){if(!(t!=null&&t.provider_id))return l.warning("Advertencia","El campo del tostador es necesario, por favor complÃ©telo.");if(!((d=t==null?void 0:t.sizes)!=null&&d.length))return l.warning("Advertencia","Es necesario completar el campo de Talla, por favor.")}else{a(!0);const n={...t};return n.products=(p=n.products)==null?void 0:p.map(o=>({id:(o==null?void 0:o.id)||o})),n.coffee_shops=(f=n.coffee_shops)==null?void 0:f.map(o=>(o==null?void 0:o.id)||o),P.addPlan(n,m).finally(o=>a(!1))}},[h,V]=s.useState({name:"",status:"active",description:"",provider_id:e==null?void 0:e.id,sizes:[],coffee_shops:[],products:[]}),m=_(),i=x({initialValues:{},onSubmit:g});return s.useEffect(()=>(i.setValues(h),()=>{}),[]),{formik:i}};function z(){const{formik:r}=j();return u.jsx(E,{title:"Formulario de Plan",showActions:!1,children:u.jsx(S,{formik:r})})}export{z as default};
