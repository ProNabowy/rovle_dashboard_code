import{u as w,i as d,r as u,A as x,h as z,G as A,g as h,U as E,j as _,P as y}from"./index-ucQm_BBe.js";import{P as j}from"./PlanForm-KPDt_qGn.js";const m=()=>{const c=new A,g=new E,P=w(),p=d().search.slice(4),{setIsLoading:i}=u.useContext(x),f=z({initialValues:{sizes:[]},onSubmit:o=>{var s,r,t,l;if(!(o!=null&&o.provider_id)||!((s=o==null?void 0:o.sizes)!=null&&s.length)){if(!(o!=null&&o.provider_id))return h.warning("Advertencia","El campo del tostador es necesario, por favor complÃ©telo.");if(!((r=o==null?void 0:o.sizes)!=null&&r.length))return h.warning("Advertencia","Es necesario completar el campo de Talla y precio, por favor.")}else{i(!0);const e={...o};return e.products=(t=e.products)==null?void 0:t.map(n=>({id:(n==null?void 0:n.id)||n})),e.coffee_shops=(l=e.coffee_shops)==null?void 0:l.map(n=>(n==null?void 0:n.id)||n),g.updatePlan(p,e).then(n=>P("/products/plans/list")).finally(n=>i(!1))}}});return u.useEffect(()=>(i(!0),c.getSinglePlan(p).then(o=>{var s;f.setValues({name:o==null?void 0:o.name,status:o==null?void 0:o.status,description:o==null?void 0:o.description,provider_id:o==null?void 0:o.provider_id,sizes:(s=o==null?void 0:o.sizes)==null?void 0:s.map(r=>({size_id:r.size_id,price:r==null?void 0:r.price,id:r==null?void 0:r.size_id})),products:o==null?void 0:o.products,coffee_shops:o==null?void 0:o.coffee_shops})}).finally(o=>i(!1)),()=>{}),[]),{formik:f}};function C(){const{formik:c}=m();return _.jsx(y,{title:"Formulario de Plan",showActions:!1,children:_.jsx(j,{formik:c})})}export{C as default};
