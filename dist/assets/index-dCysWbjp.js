import{r as l,A as V,u as L,l as O,G as k,o as D,S as G,j as e,D as F,p as _,y as K,P as B}from"./index-T_rrs4rL.js";const H=()=>{let[n,v]=l.useState([]);const u=new k,[C,w]=l.useState({}),s=new G,{setIsLoading:o,user:i}=l.useContext(V),[S,j]=l.useState([]),[y,N]=l.useState([]),m=L(),[h,g]=l.useState({}),[t,c]=l.useState({}),[x,E]=l.useState({}),[A,z]=l.useState({}),[a,P]=l.useState({});l.useEffect(()=>(o(!0),u.getRoasters().then(b=>v(b)).finally(b=>o(!1)),()=>{}),[]),l.useEffect(()=>{if(i!=null&&i.provider){const b=n==null?void 0:n.filter(r=>{var p;return(r==null?void 0:r.id)!==((p=i==null?void 0:i.provider)==null?void 0:p.id)}),d=n==null?void 0:n.filter(r=>{var p;return(r==null?void 0:r.id)===((p=i==null?void 0:i.provider)==null?void 0:p.id)});j(b),N(d),c(d==null?void 0:d[0])}else j(n),N(n)},[n]),l.useEffect(()=>(x!=null&&x.id&&u.getSingleProduct(x==null?void 0:x.id).then(b=>P(b)),()=>{}),[x]),l.useEffect(()=>{P({})},[h]),l.useEffect(()=>{f.setValues({commercial_name:a==null?void 0:a.commercial_name,code:a==null?void 0:a.code,description:a==null?void 0:a.description,trade_name:a==null?void 0:a.trade_name,region:a==null?void 0:a.region,farm:a==null?void 0:a.farm,sca_score:a==null?void 0:a.sca_score,altitude:a==null?void 0:a.altitude,process:a==null?void 0:a.process,grades:a==null?void 0:a.grades,provider_id:t==null?void 0:t.id,presentations:(a==null?void 0:a.presentations)||[],origins:(a==null?void 0:a.origins)||[],coffeeShops:[],parent_id:h==null?void 0:h.id})},[a]);const R=b=>{const d={...b};return d.origins=d==null?void 0:d.origins.map(r=>(r==null?void 0:r.id)||r),d.coffeeShops=d==null?void 0:d.coffeeShops.map(r=>(r==null?void 0:r.id)||r),o(!0),s.addProduct(d,m).finally(r=>o(!1))},f=O({initialValues:A}),T=D(b=>R(f.values));return l.useEffect(()=>{t&&f.setFieldValue("provider_id",t==null?void 0:t.id)},[t]),{rosters:n,formik:f,clickHandler:T,selectedProduct:x,setSelectedProduct:E,productInfo:a,selectedProvider:h,currentRoaster:t,setCurrentRoaster:c,setSelectedProvider:g,user:i,roasterFrom:S,roasterTo:y,setAddedShops:w}};function U(){var g;const{rosters:n,formik:v,clickHandler:u,selectedProduct:C,setSelectedProduct:w,productInfo:s,selectedProvider:o,currentRoaster:i,setCurrentRoaster:S,setSelectedProvider:j,roasterFrom:y,roasterTo:N,user:m,setAddedShops:h}=H();return e.jsxs("form",{onSubmit:t=>t.preventDefault(),className:"px-10 add-product",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{className:`${m!=null&&m.provider?"w-full":"w-[48%]"}`,children:[e.jsx("label",{htmlFor:"owner",className:"text-[18px] text-[#252525] font-medium",children:"Roaster From"}),e.jsx(F,{value:o,filter:!0,onChange:t=>{var c;return j(_(n,"id",(c=t.target.value)==null?void 0:c.id))},options:y,optionLabel:"commercial_name",inputId:"owner",placeholder:"Seleccionar Tostador",className:"w-full p-2  !shadow-none !rounded-none border-[#b3b3b3] !border-t-transparent !border-l-transparent !border-r-transparent"})]}),m!=null&&m.provider?null:e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"owner",className:"text-[18px] text-[#252525] font-medium",children:"Roaster To"}),e.jsx(F,{filter:!0,value:i,onChange:t=>{var c;return S(_(n,"id",(c=t.target.value)==null?void 0:c.id))},options:N,optionLabel:"commercial_name",inputId:"owner",placeholder:"Seleccionar Tostador",className:"w-full p-2  !shadow-none !rounded-none border-[#b3b3b3] !border-t-transparent !border-l-transparent !border-r-transparent"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"name",className:"text-[18px] text-[#252525] font-medium",children:"Nombre del Producto"}),e.jsx(F,{value:C,filter:!0,onChange:t=>w(_(o==null?void 0:o.products,"id",t.target.value.id)),options:o==null?void 0:o.products,optionLabel:"commercial_name",inputId:"name",placeholder:"Seleccionar Nombre del Producto",className:"w-full p-2  !shadow-none !rounded-none border-[#b3b3b3] !border-t-transparent !border-l-transparent !border-r-transparent"})]}),s!=null&&s.id?e.jsxs(l.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Code",className:"text-[18px] text-[#252525] font-medium",children:"Código"}),e.jsx("input",{value:s==null?void 0:s.code,disabled:!0,type:"text",id:"Code",className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Código"})]}),e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Region",className:"text-[18px] text-[#252525] font-medium",children:"Region"}),e.jsx("input",{value:s==null?void 0:s.region,disabled:!0,type:"text",id:"Region",className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Region"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"Origin",className:"text-[18px] text-[#252525] font-medium",children:"Origen"}),e.jsx("input",{value:s==null?void 0:s.origin,disabled:!0,type:"text",id:"Origin",className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Origen"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Finca",className:"text-[18px] text-[#252525] font-medium",children:"Finca"}),e.jsx("input",{value:s==null?void 0:s.farm,disabled:!0,type:"text",id:"Finca",className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Finca"})]}),e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Nombre",className:"text-[18px] text-[#252525] font-medium",children:"Nombre Comercial"}),e.jsx("input",{value:s==null?void 0:s.commercial_name,disabled:!0,type:"text",id:"Nombre",className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Nombre Comercial"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Sca",className:"text-[18px] text-[#252525] font-medium",children:"Puntuación Sca s"}),e.jsx("input",{value:s==null?void 0:s.sca_score,disabled:!0,type:"text",id:"Sca",className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Puntuación Sca s"})]}),e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Altitud",className:"text-[18px] text-[#252525] font-medium",children:"Altitud"}),e.jsx("input",{value:s==null?void 0:s.altitude,disabled:!0,type:"text",id:"Altitud",className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Altitud"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Variedad",className:"text-[18px] text-[#252525] font-medium",children:"Variety"}),e.jsx("input",{value:s==null?void 0:s.grades,disabled:!0,type:"text",id:"Variedad",className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Variety"})]}),e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Proceso",className:"text-[18px] text-[#252525] font-medium",children:"Proceso"}),e.jsx("input",{value:s==null?void 0:s.process,disabled:!0,type:"text",id:"Proceso",className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Proceso"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"Description",className:"text-[18px] text-[#252525] font-medium",children:"Descripción"}),e.jsx("textarea",{rows:5,type:"text",value:s==null?void 0:s.description,disabled:!0,id:"Description",className:"p-3 w-full border-b bg-white mt-5 resize-none border-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Descripción"})]}),e.jsxs("div",{className:"w-full mb-8",children:[e.jsx("label",{htmlFor:"Presentation",className:"text-[18px] mb-2 text-[#252525] font-medium",children:"Presentación"}),e.jsx("div",{className:"border border-[b3b3b3] p-10 px-20 rounded-[20px] grid grid-cols-12 gap-5",children:(g=s==null?void 0:s.presentations)==null?void 0:g.map((t,c)=>e.jsxs("div",{className:"col-span-6 border border-[#58291E] text-center rounded-[5px] p-2",children:[t==null?void 0:t.price," Euro por ",t==null?void 0:t.weight," gm"]},c))})]}),e.jsx(K,{formik:v,dataKey:"coffeeShops",url:"/setups/coffee-shop/add-coffee",title:"Tu Tienda",pageKey:"Coffee Shops",pagePermissionKeyName:"dashboard.coffeeShops.store",options:i==null?void 0:i.coffee_shops,stateList:h}),e.jsx("div",{className:"flex items-center justify-end mt-10",children:e.jsx("button",{onClick:u,type:"submit",className:"bg-[#45B8EA] text-white py-[16px] px-32 rounded-full",children:"Enviar"})})]}):null]})}function $(){return e.jsx(B,{title:"Formulario de Producto",showActions:!1,children:e.jsx(U,{})})}export{$ as default};
