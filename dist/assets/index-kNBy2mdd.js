import{r as m,A as y,l as _,G as w,o as C,U as N,j as n,P as I,t as D,F as P,v as A,D as F,p as j,w as L,x as S}from"./index-T_rrs4rL.js";import{I as x}from"./InputsGroup-3Y_BKlWt.js";const U=()=>{const[s,d]=m.useState({}),l=new w,[t,a]=m.useState([]),u=new N,{setIsLoading:i}=m.useContext(y),o=_({initialValues:{}});m.useEffect(()=>(i(!0),l.getProfile().then(e=>{d(e),o.setValues({name:e==null?void 0:e.name,email:e==null?void 0:e.email,address:e==null?void 0:e.address,phone:e==null?void 0:e.phone,zip:e==null?void 0:e.zip,card_id:e==null?void 0:e.card_id,country_id:e==null?void 0:e.country_id,province_id:e==null?void 0:e.province_id,city_id:e==null?void 0:e.city_id,roles:e==null?void 0:e.roles})}).then(e=>l.getCountries().then(c=>a(c))).finally(e=>i(!1)),()=>{}),[]);const p=C(e=>(i(!0),u.updateProfile(o.values).finally(c=>i(!1))));return{formik:o,clickHandler:p,data:s,counteris:t}};function G(){var a,u,i,o,p,e,c,f,h,g,b;const{formik:s,clickHandler:d,data:l,counteris:t}=U();return n.jsx(I,{title:"Mi perfil",showActions:!1,children:n.jsxs("form",{onSubmit:r=>r.preventDefault(),className:"px-10",children:[n.jsxs("div",{className:"w-[250px] h-[250px] shadow-lg mb-20 m-auto rounded-full flex items-center justify-center relative profile-image overflow-hidden",children:[n.jsx("img",{src:typeof s.values.image=="object"?URL.createObjectURL((a=s.values)==null?void 0:a.image):`${l==null?void 0:l.image}`,alt:"",onError:r=>{r.target.src=D,r.target.classList.add("!w-[150px]"),r.target.classList.add("!object-contain")},className:"w-full h-full object-cover rounded-full"}),n.jsxs("div",{className:"w-[250px] h-[250px] flex items-start justify-center rounded-full bg-[#45b9eae1] absolute left-0 z-20 transition bottom-[-250px] uploade-image",children:[n.jsx("input",{type:"file",accept:"image/png, image/gif, image/jpeg",onChange:r=>s.setFieldValue("image",r.target.files[0]),id:"uploade-img",className:"w-0 h-0 appearance-none opacity-0 scale-0"}),n.jsx("label",{htmlFor:"uploade-img",children:n.jsx(P,{icon:A,className:"text-[40px] mt-8 cursor-pointer text-white"})})]})]}),n.jsx(x,{data:{names:["Nombre","Correo electrónico"],placeholders:["Ingresar Nombre","example@gmail.com"],values:[(u=s.values)==null?void 0:u.name,(i=s.values)==null?void 0:i.email],onChange:s.handleChange,nameAttr:["name","emil"],disabledSecondInput:!0}}),n.jsx(x,{data:{names:["Dirección","Teléfono"],placeholders:["Ingresar Dirección","Ingresar Teléfono"],values:[(o=s.values)==null?void 0:o.address,(p=s.values)==null?void 0:p.phone],onChange:s.handleChange,nameAttr:["address","phone"]}}),n.jsx(x,{data:{names:["Código postal","Identificación de tarjeta"],placeholders:["Ingresar Código postal","Ingresar Identificación de tarjeta"],values:[(e=s.values)==null?void 0:e.zip,(c=s.values)==null?void 0:c.card_id],onChange:s.handleChange,nameAttr:["zip","card_id"]}}),n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"w-[48%]",children:[n.jsx("label",{className:"text-[18px] text-[#252525] font-medium block",children:"País"}),n.jsx(F,{value:j(t,"id",(f=s==null?void 0:s.values)==null?void 0:f.country_id),onChange:r=>{var v;return s.setFieldValue("country_id",(v=r.target.value)==null?void 0:v.id)},options:t,optionLabel:"name",filter:!0,placeholder:"Seleccionar nombre de país",className:"p-2 w-full !shadow-none !rounded-none !border-t-transparent !border-l-transparent !border-r-transparent"})]}),n.jsx(L,{formik:s,countries:t,country_Key:"country_id",province_Key:"province_id"})]}),n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsx(S,{formik:s,provinces:(g=j(t,"id",(h=s==null?void 0:s.values)==null?void 0:h.country_id))==null?void 0:g.provinces,province_Key:"province_id",city_Key:"city_id"}),n.jsxs("div",{className:"w-[48%]",children:[n.jsx("label",{htmlFor:"Permissions",className:"text-[18px] text-[#252525] font-medium block",children:"Permisos"}),n.jsx("input",{disabled:!0,value:s.values.roles&&((b=s.values.roles[0])==null?void 0:b.name),type:"text",id:"Permissions",className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]"})]})]}),n.jsx("div",{className:"flex items-center justify-end mt-10",children:n.jsx("button",{onClick:d,className:"bg-[#45B8EA] text-white py-[16px] px-32 rounded-full",children:"Guardar cambios"})})]})})}export{G as default};
