import{r as i,A as V,u as k,l as L,G as D,o as G,S as K,j as e,D as P,p as A,I as x,y as H,P as U}from"./index-oURgFu_2.js";const z=()=>{let[d,N]=i.useState([]);const u=new D,[f,F]=i.useState({}),s=new K,{setIsLoading:o,user:r}=i.useContext(V),[y,v]=i.useState([]),[_,S]=i.useState([]),m=k(),[p,C]=i.useState({}),[c,j]=i.useState({}),[l,h]=i.useState({}),[R,W]=i.useState({}),[a,E]=i.useState({});i.useEffect(()=>(o(!0),r!=null&&r.provider?u.getAllRoasters().then(b=>N(b)).finally(b=>o(!1)):u.getRoasters().then(b=>N(b)).finally(b=>o(!1)),()=>{}),[]),i.useEffect(()=>{if(r!=null&&r.provider){const b=d==null?void 0:d.filter(t=>{var g;return(t==null?void 0:t.id)!==((g=r==null?void 0:r.provider)==null?void 0:g.id)}),n=d==null?void 0:d.filter(t=>{var g;return(t==null?void 0:t.id)===((g=r==null?void 0:r.provider)==null?void 0:g.id)});v(b),S(n),j(n==null?void 0:n[0])}else v(d),S(d)},[d]),i.useEffect(()=>(l!=null&&l.id&&u.getSingleProduct(l==null?void 0:l.id).then(b=>E(b)),()=>{}),[l]),i.useEffect(()=>{E({})},[p]),i.useEffect(()=>{w.setValues({commercial_name:a==null?void 0:a.commercial_name,code:a==null?void 0:a.code,description:a==null?void 0:a.description,trade_name:a==null?void 0:a.trade_name,region:a==null?void 0:a.region,farm:a==null?void 0:a.farm,sca_score:a==null?void 0:a.sca_score,altitude:a==null?void 0:a.altitude,process:a==null?void 0:a.process,grades:a==null?void 0:a.grades,provider_id:c==null?void 0:c.id,presentations:(a==null?void 0:a.presentations)||[],origins:(a==null?void 0:a.origins)||[],coffeeShops:[],parent_id:p==null?void 0:p.id})},[a]);const O=b=>{const n={...b};return n.origins=n==null?void 0:n.origins.map(t=>(t==null?void 0:t.id)||t),n.coffeeShops=n==null?void 0:n.coffeeShops.map(t=>(t==null?void 0:t.id)||t),o(!0),s.addProduct(n,m).finally(t=>o(!1))},w=L({initialValues:R}),T=G(b=>O(w.values));return i.useEffect(()=>{c&&w.setFieldValue("provider_id",c==null?void 0:c.id)},[c]),{rosters:d,formik:w,clickHandler:T,selectedProduct:l,setSelectedProduct:h,productInfo:a,selectedProvider:p,currentRoaster:c,setCurrentRoaster:j,setSelectedProvider:C,user:r,roasterFrom:y,roasterTo:_,setAddedShops:F,addedShops:f}};function B(){var c,j;const{rosters:d,formik:N,clickHandler:u,selectedProduct:f,setSelectedProduct:F,productInfo:s,selectedProvider:o,currentRoaster:r,setCurrentRoaster:y,setSelectedProvider:v,roasterFrom:_,roasterTo:S,user:m,setAddedShops:p,addedShops:C}=z();return e.jsxs("form",{onSubmit:l=>l.preventDefault(),autoComplete:"off",className:"px-10 add-product",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{className:`${m!=null&&m.provider?"w-full":"w-[48%]"}`,children:[e.jsx("label",{htmlFor:"owner",className:"label",children:"Roaster From"}),e.jsx(P,{value:o,filter:!0,onChange:l=>{var h;return v(A(d,"id",(h=l.target.value)==null?void 0:h.id))},options:_,optionLabel:"commercial_name",inputId:"owner",placeholder:"Seleccionar Tostador",className:"w-full p-2  !shadow-none !rounded-none border-[#b3b3b3] !border-t-transparent !border-l-transparent !border-r-transparent"})]}),m!=null&&m.provider?null:e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"owner",className:"label",children:"Roaster To"}),e.jsx(P,{filter:!0,value:r,onChange:l=>{var h;return y(A(d,"id",(h=l.target.value)==null?void 0:h.id))},options:S,optionLabel:"commercial_name",inputId:"owner",placeholder:"Seleccionar Tostador",className:"w-full p-2  !shadow-none !rounded-none border-[#b3b3b3] !border-t-transparent !border-l-transparent !border-r-transparent"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"name",className:"label",children:"Nombre del Producto"}),e.jsx(P,{value:f,filter:!0,onChange:l=>F(A(o==null?void 0:o.products,"id",l.target.value.id)),options:o==null?void 0:o.products,optionLabel:"commercial_name",inputId:"name",placeholder:"Seleccionar Nombre del Producto",className:"w-full p-2  !shadow-none !rounded-none border-[#b3b3b3] !border-t-transparent !border-l-transparent !border-r-transparent"})]}),s!=null&&s.id?e.jsxs(i.Fragment,{children:[e.jsxs("div",{className:"flex-container",children:[e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Code",className:"label",children:"Código"}),e.jsx(x,{value:s==null?void 0:s.code,disabled:!0,type:"text",id:"Code",placeholder:"Ingresar Código"})]}),e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Region",className:"label",children:"Region"}),e.jsx(x,{value:s==null?void 0:s.region,disabled:!0,type:"text",id:"Region",placeholder:"Ingresar Region"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"Origin",className:"label",children:"Origen"}),e.jsx(x,{value:s==null?void 0:s.origin,disabled:!0,type:"text",id:"Origin",className:"p-3 w-full border-b border-b-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Origen"})]}),e.jsxs("div",{className:"flex-container",children:[e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Finca",className:"label",children:"Finca"}),e.jsx(x,{value:s==null?void 0:s.farm,disabled:!0,type:"text",id:"Finca",placeholder:"Ingresar Finca"})]}),e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Nombre",className:"label",children:"Nombre Comercial"}),e.jsx(x,{value:s==null?void 0:s.commercial_name,disabled:!0,type:"text",id:"Nombre",placeholder:"Ingresar Nombre Comercial"})]})]}),e.jsxs("div",{className:"flex-container",children:[e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Sca",className:"label",children:"Puntuación Sca s"}),e.jsx(x,{value:s==null?void 0:s.sca_score,disabled:!0,type:"text",id:"Sca",placeholder:"Ingresar Puntuación Sca s"})]}),e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Altitud",className:"label",children:"Altitud"}),e.jsx(x,{value:s==null?void 0:s.altitude,disabled:!0,type:"text",id:"Altitud",placeholder:"Ingresar Altitud"})]})]}),e.jsxs("div",{className:"flex-container",children:[e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Variedad",className:"label",children:"Variety"}),e.jsx(x,{value:s==null?void 0:s.grades,disabled:!0,type:"text",id:"Variedad",placeholder:"Ingresar Variety"})]}),e.jsxs("div",{className:"w-[48%]",children:[e.jsx("label",{htmlFor:"Proceso",className:"label",children:"Proceso"}),e.jsx(x,{value:s==null?void 0:s.process,disabled:!0,type:"text",id:"Proceso",placeholder:"Ingresar Proceso"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"Description",className:"label",children:"Descripción"}),e.jsx("textarea",{rows:5,type:"text",value:s==null?void 0:s.description,disabled:!0,id:"Description",className:"p-3 w-full border-b bg-white mt-5 resize-none border-[#b3b3b3] placeholder:text-[#b3b3b3]",placeholder:"Ingresar Descripción"})]}),e.jsxs("div",{className:"w-full mb-8",children:[e.jsx("label",{htmlFor:"Presentation",className:"text-[18px] mb-2 text-[#252525] font-medium",children:"Presentación"}),e.jsx("div",{className:"border border-[b3b3b3] p-10 px-20 rounded-[20px] grid grid-cols-12 gap-5",children:(c=s==null?void 0:s.presentations)==null?void 0:c.map((l,h)=>e.jsxs("div",{className:"col-span-6 border border-[#58291E] text-center rounded-[5px] p-2",children:[l==null?void 0:l.price," Euro por ",l==null?void 0:l.weight," gm"]},h))})]}),e.jsx(H,{formik:N,dataKey:"coffeeShops",url:"/setups/coffee-shop/add-coffee",title:"Tu Tienda",pageKey:"Coffee Shops",pagePermissionKeyName:"dashboard.coffeeShops.store",options:((j=m==null?void 0:m.provider)==null?void 0:j.coffee_shops)||(r==null?void 0:r.coffee_shops),stateList:p,listOfState:C}),e.jsx("button",{onClick:u,type:"submit",className:"min-btn block !mt-10 ml-auto",children:"Enviar"})]}):null]})}function q(){return e.jsx(U,{title:"Formulario de Producto",showActions:!1,children:e.jsx(B,{})})}export{q as default};
