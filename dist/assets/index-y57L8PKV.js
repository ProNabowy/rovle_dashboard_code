import{r,A as p,h as F,j as e,L as g,F as h,ae as f,u as y}from"./index-oURgFu_2.js";import{A as b,v}from"./login-vector-GL68zmYX.js";const N=()=>{const[l,n]=r.useState(!1),t=sessionStorage.getItem("valid-otp")?2:sessionStorage.getItem("email")?1:0,[s,o]=r.useState(t),d=new b,[i,x]=r.useState({email:"",password:""}),{setIsLoading:u}=r.useContext(p);return{checked:l,setChecked:n,data:i,setData:x,handelSubmit:a=>(a.preventDefault(),u(!0),d.forgetPassword({email:i==null?void 0:i.email}).then(m=>F.success("Actualizado!",m==null?void 0:m.message)).then(m=>{o(1),sessionStorage.setItem("email",i==null?void 0:i.email)}).finally(m=>u(!1))),activeIndex:s,setActiveIndex:o}},k="/assets/lock-xf8dIxxJ.png";function S({setData:l,handelSubmit:n}){return e.jsxs(r.Fragment,{children:[e.jsxs(g,{to:"/login",className:"flex items-center mb-10 cursor-pointer",children:[e.jsx(h,{icon:f}),e.jsx("span",{className:"ms-3 text-[#252525]",children:"Back to log in"})]}),e.jsx("img",{src:k,className:"m-auto mb-4"}),e.jsxs("form",{onSubmit:n,autoComplete:"off",children:[e.jsx("h3",{className:"text-[24px] text-[#252525] text-center mb-2 font-medium",children:"Forget password"}),e.jsx("h5",{className:"text-[#252525] max-w-[380px] text-center mb-8",children:"Enter your Email and we will send a code to reset your password"}),e.jsx("label",{className:"block font-[400] text-[14px]",htmlFor:"email",children:"Dirección de correo electrónico"}),e.jsx("input",{autoFocus:!0,onChange:t=>l(s=>({...s,email:t.target.value})),id:"email",type:"email",className:"w-full mb-6 h-[40px] px-5 rounded-[8px]",style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"}}),e.jsx("button",{className:"w-full h-[45px] mt-[16px] text-center rounded-[8px] text-white bg-[#45B8EA]",style:{backdropFilter:"blur(12.343469619750977px)"},children:"Enviar"})]})]})}const C=l=>{const n=r.useRef(),t=r.useRef(),s=r.useRef(),o=r.useRef(),d=r.useRef(),i=r.useRef(),[x,u]=r.useState({1:"",2:"",3:"",4:"",5:"",6:""}),c=(a,m)=>{const j=a.target.value;return j.length&&(u(w=>({...w,[a.target.name]:j})),m&&m.current.focus()),null};return r.useEffect(()=>{l(a=>({...a,code:Object.values(x).join("")}))},[x]),{first_inputRef:n,second_inputRef:t,thired_inputRef:s,fourth_inputRef:o,fifth_inputRef:d,sixth_inputRef:i,handleChange:c,value:x}};function _({setUpdatePasswordData:l,invalid:n}){const{first_inputRef:t,second_inputRef:s,thired_inputRef:o,fourth_inputRef:d,fifth_inputRef:i,sixth_inputRef:x,handleChange:u}=C(l),c=`rounded-[8px] border border-[rgba(255,_255,_255,_0.40)] w-[62px] h-[74px] transition px-4 ${n?"!border-[red] !text-[red]":""} text-center text-[30px] me-6 flex items-center justify-center`;return e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-center mb-[48px] ",children:[e.jsx("input",{type:"text",name:"1",ref:t,onChange:a=>u(a,s),maxLength:1,autoFocus:!0,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${c}`}),e.jsx("input",{type:"text",name:"2",ref:s,onChange:a=>u(a,o),maxLength:1,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${c}`}),e.jsx("input",{type:"text",name:"3",ref:o,onChange:a=>u(a,d),maxLength:1,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${c}`}),e.jsx("input",{type:"text",name:"4",ref:d,onChange:a=>u(a,i),maxLength:1,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${c}`}),e.jsx("input",{type:"text",name:"5",ref:i,onChange:a=>u(a,x),maxLength:1,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${c}`}),e.jsx("input",{type:"text",name:"6",ref:x,onChange:a=>u(a),maxLength:1,style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"},className:`${c}`})]})})}const R=l=>{const[n,t]=r.useState(null),[s,o]=r.useState(!1),d=sessionStorage.getItem("email"),{setIsLoading:i}=r.useContext(p),x=new b;return{code:n,setCode:t,handelSubmit:c=>(c.preventDefault(),i(!0),x.verifyOtp({email:d,otp:n}).then(a=>(l(2),console.log(n),sessionStorage.setItem("valid-otp",n.code))).catch(a=>o(!0)).finally(a=>i(!1))),email:d,invalid:s,setInvalid:o}};function I({setActiveIndex:l}){const{handelSubmit:n,code:t,email:s,invalid:o,setCode:d}=R(l);return e.jsxs(r.Fragment,{children:[e.jsxs(g,{to:"/login",className:"flex items-center mb-10 cursor-pointer",children:[e.jsx(h,{icon:f}),e.jsx("span",{className:"ms-3 text-[#252525]",children:"Back to log in"})]}),e.jsxs("form",{onSubmit:n,autoComplete:"off",children:[e.jsx("h3",{className:"text-[24px] text-[#252525] text-center mb-2 font-medium",children:"Forget password"}),e.jsxs("h5",{className:"text-[#252525] max-w-[380px] text-center mb-8 mx-auto",children:["Please enter the code sent to your email ",e.jsx("br",{})," ",s]}),e.jsx(_,{setUpdatePasswordData:d,data:t,invalid:o}),e.jsx("button",{className:"w-full h-[45px] mt-[16px] text-center rounded-[8px] text-white bg-[#45B8EA]",style:{backdropFilter:"blur(12.343469619750977px)"},children:"Enviar"})]})]})}const A=()=>{const l=sessionStorage.getItem("email"),n=sessionStorage.getItem("valid-otp"),[t,s]=r.useState({}),o=y(),{setIsLoading:d}=r.useContext(p),i=new b;return{email:l,handleSubmit:u=>(u.preventDefault(),d(!0),i.resetPassword({...t,email:l,otp:n}).then(c=>F.success("Actualizado!",c==null?void 0:c.message).then(a=>(sessionStorage.clear(),o("/login")))).finally(c=>d(!1))),setData:s}};function D({}){const{email:l,setData:n,handleSubmit:t}=A();return e.jsxs(r.Fragment,{children:[e.jsxs(g,{to:"/login",className:"flex items-center mb-10 cursor-pointer",children:[e.jsx(h,{icon:f}),e.jsx("span",{className:"ms-3 text-[#252525]",children:"Back to log in"})]}),e.jsxs("form",{onSubmit:t,autoComplete:"off",className:"w-[400px]",children:[e.jsx("h3",{className:"text-[24px] text-[#252525] text-center mb-2 font-medium",children:"Forget password"}),e.jsxs("h5",{className:"text-[#252525] text-center mb-8",children:["Enter new password for ",l]}),e.jsx("label",{className:"block font-[400] text-[14px]",htmlFor:"password",children:"Enter new password"}),e.jsx("input",{autoFocus:!0,onChange:s=>n(o=>({...o,password:s.target.value})),id:"password",type:"password",className:"w-full mb-4 h-[40px] px-5 rounded-[8px]",style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"}}),e.jsx("label",{className:"block font-[400] text-[14px]",htmlFor:"conf_password",children:"Confirm password"}),e.jsx("input",{onChange:s=>n(o=>({...o,password_confirmation:s.target.value})),id:"conf_password",type:"password",className:"w-full mb-6 h-[40px] px-5 rounded-[8px]",style:{background:"linear-gradient(120deg, #FFF -45.57%, rgba(217, 217, 217, 0.00) 134.89%)",backdropFilter:"blur(12.343469619750977px)"}}),e.jsx("button",{className:"w-full h-[45px] mt-[16px] text-center rounded-[8px] text-white bg-[#45B8EA]",style:{backdropFilter:"blur(12.343469619750977px)"},children:"Restablecer la contraseña"})]})]})}function L(){const{setData:l,handelSubmit:n,activeIndex:t,setActiveIndex:s}=N();return e.jsxs("div",{className:"login w-full h-[100vh] flex items-center justify-center",style:{background:"linear-gradient(90deg, rgba(216,225,252,1) 0%, rgba(191,203,241,1) 33%, rgba(176,195,255,1) 100%)"},children:[e.jsx("img",{src:v,className:"absolute right-0 bottom-0"}),e.jsx("div",{className:"container flex justify-center items-center",children:e.jsx("div",{className:"min-h-[450px] flex items-center justify-center",children:e.jsxs("div",{className:"p-[32px] h-full rounded-[10px]",style:{background:"linear-gradient(120deg, rgba(241, 241, 241, 0.43) -45.57%, rgba(243, 243, 243, 0.00) 134.89%)",backdropFilter:"blur(5px)",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.25)"},children:[t===0?e.jsx(S,{handelSubmit:n,setData:l,setActiveIndex:s}):null,t===1?e.jsx(I,{setActiveIndex:s}):null,t===2?e.jsx(D,{setActiveIndex:s}):null,e.jsxs("div",{className:"flex items-center justify-center mt-10",children:[e.jsx("div",{className:`w-[19px] h-[19px] rounded-full ${t===0?"bg-[var(--primary-color)]":"bg-white"} me-4`,children:"  "}),e.jsx("div",{className:`w-[19px] h-[19px] rounded-full ${t===1?"bg-[var(--primary-color)]":"bg-white"} me-4`,children:"  "}),e.jsx("div",{className:`w-[19px] h-[19px] rounded-full ${t===2?"bg-[var(--primary-color)]":"bg-white"} me-4`,children:"  "})]})]})})})]})}export{L as default};
