import{r as p,A as y,l as N,G as _,o as w,U as C,j as s,P as F,t as I,I as r,F as D,v as P,D as z,p as f,w as q,x as L}from"./index-UqVmnRqZ.js";const U=()=>{const[e,h]=p.useState({}),a=new _,[c,d]=p.useState([]),u=new C,{setIsLoading:i}=p.useContext(y),t=N({initialValues:{}});p.useEffect(()=>(i(!0),a.getProfile().then(l=>{h(l),t.setValues({name:l==null?void 0:l.name,email:l==null?void 0:l.email,address:l==null?void 0:l.address,phone:l==null?void 0:l.phone,zip:l==null?void 0:l.zip,card_id:l==null?void 0:l.card_id,country_id:l==null?void 0:l.country_id,province_id:l==null?void 0:l.province_id,city_id:l==null?void 0:l.city_id,roles:l==null?void 0:l.roles})}).then(l=>a.getCountries().then(o=>d(o))).finally(l=>i(!1)),()=>{}),[]);const m=w(l=>(i(!0),u.updateProfile(t.values).finally(o=>i(!1))));return{formik:t,clickHandler:m,data:e,counteris:c}};function A(){var d,u,i,t,m,l,o,x,g,j,v;const{formik:e,clickHandler:h,data:a,counteris:c}=U();return s.jsx(F,{title:"Mi perfil",showActions:!1,children:s.jsxs("form",{onSubmit:n=>n.preventDefault(),className:"px-10",children:[s.jsxs("div",{className:"w-[250px] h-[250px] shadow-lg mb-20 m-auto rounded-full flex items-center justify-center relative profile-image overflow-hidden",children:[s.jsx("img",{src:typeof e.values.image=="object"?URL.createObjectURL((d=e.values)==null?void 0:d.image):`${a==null?void 0:a.image}`,alt:"",onError:n=>{n.target.src=I,n.target.classList.add("!w-[150px]"),n.target.classList.add("!object-contain")},className:"w-full h-full object-cover rounded-full"}),s.jsxs("div",{className:"w-[250px] h-[250px] flex items-start justify-center rounded-full bg-[#45b9eae1] absolute left-0 z-20 transition bottom-[-250px] uploade-image",children:[s.jsx(r,{type:"file",accept:"image/png, image/gif, image/jpeg",onChange:n=>e.setFieldValue("image",n.target.files[0]),id:"uploade-img",classNames:"!w-0 !h-0 appearance-none !opacity-0 !scale-0"}),s.jsx("label",{htmlFor:"uploade-img",children:s.jsx(D,{icon:P,className:"text-[40px] mt-8 cursor-pointer text-white"})})]})]}),s.jsxs("div",{className:"flex-container",children:[s.jsxs("div",{className:"sm:w-[48%]",children:[s.jsx("label",{htmlFor:"name",className:"label",children:"Nombre"}),s.jsx(r,{value:(u=e==null?void 0:e.values)==null?void 0:u.name,name:"name",type:"text",required:!0,onChange:e.handleChange,id:"name",placeholder:"Ingresar Nombre"})]}),s.jsxs("div",{className:"sm:w-[48%]",children:[s.jsx("label",{htmlFor:"email",className:"label",children:"Correo electrónico"}),s.jsx(r,{value:(i=e==null?void 0:e.values)==null?void 0:i.email,name:"email",type:"email",disabled:!0,required:!0,onChange:e.handleChange,id:"email",placeholder:"example@gmail.com"})]})]}),s.jsxs("div",{className:"flex-container",children:[s.jsxs("div",{className:"sm:w-[48%]",children:[s.jsx("label",{htmlFor:"address",className:"label",children:"Dirección"}),s.jsx(r,{value:(t=e==null?void 0:e.values)==null?void 0:t.address,name:"address",type:"text",required:!0,onChange:e.handleChange,id:"address",placeholder:"Ingresar Dirección"})]}),s.jsxs("div",{className:"sm:w-[48%]",children:[s.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono"}),s.jsx(r,{value:(m=e==null?void 0:e.values)==null?void 0:m.phone,name:"phone",type:"text",disabled:!0,required:!0,onChange:e.handleChange,id:"phone",placeholder:"Ingresar Teléfono"})]})]}),s.jsxs("div",{className:"flex-container",children:[s.jsxs("div",{className:"sm:w-[48%]",children:[s.jsx("label",{htmlFor:"zip",className:"label",children:"Código postal"}),s.jsx(r,{value:(l=e==null?void 0:e.values)==null?void 0:l.zip,name:"zip",type:"number",required:!0,onChange:e.handleChange,id:"zip",placeholder:"Ingresar Código postal"})]}),s.jsxs("div",{className:"sm:w-[48%]",children:[s.jsx("label",{htmlFor:"card_id",className:"label",children:"Identificación de tarjeta"}),s.jsx(r,{value:(o=e==null?void 0:e.values)==null?void 0:o.card_id,name:"card_id",type:"text",disabled:!0,required:!0,onChange:e.handleChange,id:"card_id",placeholder:"Ingresar Identificación de tarjeta"})]})]}),s.jsxs("div",{className:"flex-container",children:[s.jsxs("div",{className:"w-[48%]",children:[s.jsx("label",{className:"label block",children:"País"}),s.jsx(z,{value:f(c,"id",(x=e==null?void 0:e.values)==null?void 0:x.country_id),onChange:n=>{var b;return e.setFieldValue("country_id",(b=n.target.value)==null?void 0:b.id)},options:c,optionLabel:"name",filter:!0,placeholder:"Seleccionar nombre de país",className:"p-2 w-full !shadow-none !rounded-none !border-t-transparent !border-l-transparent !border-r-transparent"})]}),s.jsx(q,{formik:e,countries:c,country_Key:"country_id",province_Key:"province_id"})]}),s.jsxs("div",{className:"flex-container",children:[s.jsx(L,{formik:e,provinces:(j=f(c,"id",(g=e==null?void 0:e.values)==null?void 0:g.country_id))==null?void 0:j.provinces,province_Key:"province_id",city_Key:"city_id"}),s.jsxs("div",{className:"w-[48%]",children:[s.jsx("label",{htmlFor:"Permissions",className:"label block",children:"Permisos"}),s.jsx(r,{disabled:!0,value:e.values.roles&&((v=e.values.roles[0])==null?void 0:v.name),type:"text",id:"Permissions"})]})]}),s.jsx("button",{onClick:h,className:"min-btn block mt-10 ml-auto",children:"Guardar cambios"})]})})}export{A as default};
