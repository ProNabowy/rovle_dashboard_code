import{r as o,A as j,n as N,j as s,L as S,F as C,q as B,G as P,P as T,D as h}from"./index-UqVmnRqZ.js";import{T as A,R as E}from"./table-nZ01tZuu.js";import"./inputtext.esm-L6d5V8F-.js";const m=new A,F=e=>s.jsxs("p",{className:`mb-1 capitalize text-[13px] font-medium ${e.status=="pending"?"text-[#C9CC3A]":e.status=="processing"?"text-[#7A3ACC]":(e==null?void 0:e.status)==="active"?"text-[#28C76F]":"text-[#FF5C34]"}`,children:[" ",e==null?void 0:e.status," "]}),v=e=>{var u,r,a;return s.jsxs("p",{className:"mb-1 capitalize text-[13px] font-medium text-[#58291E]",children:[(r=(u=e==null?void 0:e.plan_size)==null?void 0:u.size)==null?void 0:r.weight,"Kg = ",(a=e==null?void 0:e.plan_size)==null?void 0:a.price," Euro"]})},L=e=>s.jsx(S,{to:`/products/plans/subscriptions/manage-package?id=${e.id}`,children:s.jsx(C,{icon:B,className:"text-[#45B8EA]"})}),x=[{field:"name",header:"Nombre",tamplate:m.nameBodyTemplate},{field:"address",header:"Dirección",tamplate:m.addressBodyTemplate},{field:"created_at",header:"Fecha de inicio",tamplate:m.startDateBodyTemplate},{field:"updated_at",header:"Fecha de finalización",tamplate:m.lastDateBodyTemplate},{field:"status",header:"Estado",tamplate:F},{field:"name",header:"Paquete",tamplate:v},{field:"action",header:"Acción",tamplate:L}],_=()=>{const[e,u]=o.useState([]),{user:r,setIsLoading:a}=o.useContext(j),c=new P,[i,d]=o.useState({}),[n,p]=o.useState({}),l=r==null?void 0:r.provider;N().pathname;const[g,b]=o.useState([]),[y,f]=o.useState([]);return o.useEffect(()=>(a(!0),c.getRoasters().then(t=>u(t)).finally(t=>a(!1)),()=>{}),[]),o.useEffect(()=>(l!=null&&l.id?c.getPlansByProvider(l==null?void 0:l.id).then(t=>b(t)):i!=null&&i.id&&c.getPlansByProvider(i==null?void 0:i.id).then(t=>b(t)),()=>{}),[i]),o.useEffect(()=>(a(!0),n!=null&&n.id?c.getSubscriptionsByPlanId(n==null?void 0:n.id).then(t=>f(t)).finally(t=>a(!1)):c.getSubscriptions().then(t=>f(t)).finally(t=>a(!1)),()=>{}),[n]),{selectedRosters:i,setselectedRosters:d,rosters:e,selectedPlan:n,setselectedPlan:p,subscriptionsList:y,plans:g,provider:l}};function G(){const{selectedRosters:e,setselectedRosters:u,rosters:r,selectedPlan:a,setselectedPlan:c,plans:i,provider:d,subscriptionsList:n}=_(),p=o.useRef();return s.jsxs(T,{url:"/products/plans/add-plan",addnewClassNames:"hidden",title:"Suscripciones",showActions:!0,table:p,columns:x,list:n,saveName:"Subscriptions",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-5 w-full my-5 px-10",children:[d!=null&&d.id?null:s.jsxs("div",{className:"col-span-6",children:[s.jsx("label",{htmlFor:"name-input",className:"mb-3 block font-medium text-[#234486]",children:"Tostador"}),s.jsx(h,{filter:!0,value:e&&e,onChange:l=>u(l.value),options:r,optionLabel:"commercial_name",placeholder:"Seleccionar proveedor",className:"w-full p-3 !border-r-[0] !border-l-[0] !border-t-[0] !border-b !border-b-[#b3b3b3] !shadow-none !rounded-none"})]}),s.jsxs("div",{className:`${d!=null&&d.id?"col-span-12":"col-span-6"}`,children:[s.jsx("label",{htmlFor:"name-input",className:"mb-3 block font-medium text-[#234486]",children:"Nombre del plan"}),s.jsx(h,{filter:!0,value:a&&a,onChange:l=>c(l.value),options:Array.from(i),optionLabel:"name",placeholder:"Seleccionar Plan",className:"w-full p-3 !border-r-[0] !border-l-[0] !border-t-[0] !border-b !border-b-[#b3b3b3] !shadow-none !rounded-none"})]})]}),s.jsx(E,{columns:x,list:n,table:p})]})}export{G as default};
